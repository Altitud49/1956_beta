scripted_gui = {
	r56_ship_market_main_container = {
		parent_window_name = overview_specific_tab_window #countryinternationalmarketview
		context_type = player_context
		window_name = "r56_ship_market_main_container"
		visible = {
			has_country_flag = r56_ship_market_shown
		}
	}
	r56_ship_market_buying_container = {
		parent_window_name = buyer_specific_tab_window
		context_type = player_context
		window_name = "r56_ship_market_buying_container"
		visible = {
			has_country_flag = r56_ship_market_shown
		}
	}
	r56_ship_market_selling_container = {
		parent_window_name = seller_specific_tab_window
		context_type = player_context
		window_name = "r56_ship_market_selling_container"
		visible = {
			has_country_flag = r56_ship_market_shown
		}
		triggers = {
			sell_submarine_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@submarine
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_submarine_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@submarine
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_destroyer_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@destroyer
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_destroyer_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@destroyer
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_light_cruiser_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@light_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_light_cruiser_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@light_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_heavy_cruiser_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@heavy_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_heavy_cruiser_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@heavy_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_battle_cruiser_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@battle_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_battle_cruiser_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@battle_cruiser
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_battleship_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@battleship
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_battleship_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@battleship
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			sell_carrier_btn_click_enabled  = {
				check_variable = {
					var = num_ships_with_type@carrier
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
			scrap_carrier_btn_click_enabled = {
				check_variable = {
					var = num_ships_with_type@carrier
					value = 0
					compare = greater_than
				}
				NOT = {
					has_country_flag = r56_ship_open_scrapper
					has_country_flag = r56_ship_open_seller
				}
			}
		}
		effects = {
			sell_submarine_btn_click = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_submarine
				if = {
					limit = {
						has_variable = submarine_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = submarine_to_be_listed }
				}
			}
			scrap_submarine_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_submarine
			}
			sell_destroyer_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_destroyer
				if = {
					limit = {
						has_variable = destroyer_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = destroyer_to_be_listed }
				}
			}
			scrap_destroyer_btn_click  = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_destroyer
			}
			sell_light_cruiser_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_light_cruiser
				if = {
					limit = {
						has_variable = light_cruiser_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = light_cruiser_to_be_listed }
				}
			}
			scrap_light_cruiser_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_light_cruiser
			}
			sell_heavy_cruiser_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_heavy_cruiser
				if = {
					limit = {
						has_variable = heavy_cruiser_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = heavy_cruiser_to_be_listed }
				}
			}
			scrap_heavy_cruiser_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_heavy_cruiser
			}
			sell_battle_cruiser_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_battle_cruiser
				if = {
					limit = {
						has_variable = battle_cruiser_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = battle_cruiser_to_be_listed }
				}
			}
			scrap_battle_cruiser_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_battle_cruiser
			}
			sell_battleship_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_battleship
				if = {
					limit = {
						has_variable = battleship_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = battleship_to_be_listed }
				}
			}
			scrap_battleship_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_battleship
			}
			sell_carrier_btn_click  = {
				set_country_flag = r56_ship_open_seller
				set_country_flag = r56_seller_carrier
				if = {
					limit = {
						has_variable = carrier_to_be_listed
					}
					set_variable = { ShipMarketOrderNumber = carrier_to_be_listed }
				}
			}
			scrap_carrier_btn_click = {
				set_country_flag = r56_ship_open_scrapper
				set_country_flag = r56_seller_carrier
			}
		}
	}
	r56_ship_market_open_container = {
		parent_window_name = countryinternationalmarketview
		context_type = player_context
		window_name = "r56_ship_market_open_container"
		effects = {
			r56_ship_market_open_click = {
				set_country_flag = r56_ship_market_shown
			}
			r56_ship_market_close_at_right_click = {
				clr_country_flag = r56_ship_market_shown
			}
		}
		triggers = {
			r56_ship_market_open_visible = {
				NOT = {
					has_country_flag = r56_ship_market_shown
				}
			}
			r56_ship_market_close_at_right_visible = {
				has_country_flag = r56_ship_market_shown
			}
		}
	}
	r56_ship_market_order_selector_window = {
		context_type = player_context
		window_name = "r56_ship_market_order_selector_window"
		visible = {
			OR = {
				has_country_flag = r56_ship_open_scrapper
				has_country_flag = r56_ship_open_seller
			}
		}
		triggers = {
			r56ship_order_plus_1_click_enabled = {
				meta_trigger = {
					text = {
						check_variable = {
							var = ShipMarketOrderNumber
							value = num_ships_with_type@[ShipTypeSelected]
							compare = less_than
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_5_click_enabled = {
				meta_trigger = {
					text = {
						check_variable = {
							var = ShipMarketOrderNumber
							value = num_ships_with_type@[ShipTypeSelected]
							compare = less_than
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_20_click_enabled = {
				meta_trigger = {
					text = {
						check_variable = {
							var = ShipMarketOrderNumber
							value = num_ships_with_type@[ShipTypeSelected]
							compare = less_than
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_50_click_enabled = {
				meta_trigger = {
					text = {
						check_variable = {
							var = ShipMarketOrderNumber
							value = num_ships_with_type@[ShipTypeSelected]
							compare = less_than
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_minus_1_click_enabled = {
				check_variable = {
					ShipMarketOrderNumber > 0
				}
			}
			r56ship_order_minus_5_click_enabled = {
				check_variable = {
					ShipMarketOrderNumber > 0
				}
			}
			r56ship_order_minus_20_click_enabled = {
				check_variable = {
					ShipMarketOrderNumber > 0
				}
			}
			r56ship_order_minus_50_click_enabled = {
				check_variable = {
					ShipMarketOrderNumber > 0
				}
			}
			r56ship_confirm_button_click_enabled = {
				if = {
					limit = {
						has_country_flag = r56_ship_open_scrapper
					}
					OR = {
						has_country_flag = r56_ship_market_selected_recycle
						has_country_flag = r56_ship_market_selected_sell_scrap
					}
				}
			}
			r56ship_recycle_selector_sell_scrap_off_visible = {
				has_country_flag = r56_ship_open_scrapper
				NOT = {
					has_country_flag = r56_ship_market_selected_sell_scrap
				}
			}
			r56ship_recycle_selector_sell_scrap_on_visible = {
				has_country_flag = r56_ship_open_scrapper
				has_country_flag = r56_ship_market_selected_sell_scrap
			}
			r56ship_recycle_selector_recycle_off_visible = {
				has_country_flag = r56_ship_open_scrapper
				NOT = {
					has_country_flag = r56_ship_market_selected_recycle
				}
			}
			r56ship_recycle_selector_recycle_on_visible = {
				has_country_flag = r56_ship_open_scrapper
				has_country_flag = r56_ship_market_selected_recycle
			}
			r56ship_sell_scrap_selector_title_visible = {
				has_country_flag = r56_ship_open_scrapper
			}
			r56ship_recycle_selector_title_visible = {
				has_country_flag = r56_ship_open_scrapper
			}
		}
		effects = {
			r56ship_cancel_button_click = {
				clr_country_flag = r56_ship_open_scrapper
				clr_country_flag = r56_ship_open_seller
				clr_country_flag = r56_seller_submarine
				clr_country_flag = r56_seller_destroyer
				clr_country_flag = r56_seller_light_cruiser
				clr_country_flag = r56_seller_heavy_cruiser
				clr_country_flag = r56_seller_battle_cruiser
				clr_country_flag = r56_seller_battleship
				clr_country_flag = r56_seller_carrier

				clear_variable = ShipMarketOrderNumber
			}
			r56ship_confirm_button_click = {
				meta_effect = {
					text = {
						if = {
							limit = {
								has_country_flag = r56_ship_open_seller
							}
							set_variable = { [temp_ship_type]_to_be_listed = ShipMarketOrderNumber }
						}
						if = {
							limit = {
								has_country_flag = r56_ship_open_scrapper
							}
							destroy_ships = {
								type = [temp_ship_hull]
								count = [ordernumvar]
							}
						}
					}
					temp_ship_type = "[ShipMarketClassInternal]"
					temp_ship_hull = "[ShipMarketHullInternal]"
					ordernumvar = "[?ShipMarketOrderNumber]"
				}
				clr_country_flag = r56_ship_open_scrapper
				clr_country_flag = r56_ship_open_seller
				clr_country_flag = r56_seller_submarine
				clr_country_flag = r56_seller_destroyer
				clr_country_flag = r56_seller_light_cruiser
				clr_country_flag = r56_seller_heavy_cruiser
				clr_country_flag = r56_seller_battle_cruiser
				clr_country_flag = r56_seller_battleship
				clr_country_flag = r56_seller_carrier

				clear_variable = ShipMarketOrderNumber
			}
			r56ship_order_plus_1_click = {
				add_to_variable = {
					var = ShipMarketOrderNumber
					value = 1
				}
				meta_effect = {
					text = {
						clamp_variable = {
							var = ShipMarketOrderNumber
							max = num_ships_with_type@[ShipTypeSelected]
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_5_click = {
				add_to_variable = {
					var = ShipMarketOrderNumber
					value = 5
				}
				meta_effect = {
					text = {
						clamp_variable = {
							var = ShipMarketOrderNumber
							max = num_ships_with_type@[ShipTypeSelected]
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_20_click = {
				add_to_variable = {
					var = ShipMarketOrderNumber
					value = 20
				}
				meta_effect = {
					text = {
						clamp_variable = {
							var = ShipMarketOrderNumber
							max = num_ships_with_type@[ShipTypeSelected]
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_plus_50_click = {
				add_to_variable = {
					var = ShipMarketOrderNumber
					value = 50
				}
				meta_effect = {
					text = {
						clamp_variable = {
							var = ShipMarketOrderNumber
							max = num_ships_with_type@[ShipTypeSelected]
						}
					}
					ShipTypeSelected = "[ShipMarketClassInternal]"
				}
			}
			r56ship_order_minus_1_click = {
				subtract_from_variable = {
					var = ShipMarketOrderNumber
					value = 1
				}
				clamp_variable = {
					var = ShipMarketOrderNumber
					min = 0
				}
			}
			r56ship_order_minus_5_click = {
				subtract_from_variable = {
					var = ShipMarketOrderNumber
					value = 5
				}
				clamp_variable = {
					var = ShipMarketOrderNumber
					min = 0
				}
			}
			r56ship_order_minus_20_click = {
				subtract_from_variable = {
					var = ShipMarketOrderNumber
					value = 20
				}
				clamp_variable = {
					var = ShipMarketOrderNumber
					min = 0
				}
			}
			r56ship_order_minus_50_click = {
				subtract_from_variable = {
					var = ShipMarketOrderNumber
					value = 50
				}
				clamp_variable = {
					var = ShipMarketOrderNumber
					min = 0
				}
			}
			r56ship_recycle_selector_sell_scrap_off_click = {
				set_country_flag = r56_ship_market_selected_sell_scrap
				clr_country_flag = r56_ship_market_selected_recycle
			}
			r56ship_recycle_selector_sell_scrap_on_click = {
				clr_country_flag = r56_ship_market_selected_sell_scrap
			}
			r56ship_recycle_selector_recycle_off_click = {
				clr_country_flag = r56_ship_market_selected_sell_scrap
				set_country_flag = r56_ship_market_selected_recycle
			}
			r56ship_recycle_selector_recycle_on_click = {
				clr_country_flag = r56_ship_market_selected_recycle
			}
		}
	}
}
