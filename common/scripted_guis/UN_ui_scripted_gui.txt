scripted_gui = {

	united_nations_button_ui = {
		context_type = player_context
		window_name = "un_menu_button"

		visible = {
			always = yes
			#has_country_flag = un_established_flag
		}
		
		effects = {
			ui_menu_open_button_click = {
				set_country_flag = UN_menu_open_flag
				set_country_flag = UN_menu_main_main_flag
				clr_country_flag = UN_menu_main_council_flag
				clr_country_flag = UN_menu_main_departments_flag
			}
		}
	}

	united_nations_main_ui = {
		context_type = player_context
		window_name = "un_menu_main"

		visible = {
			has_country_flag = UN_menu_open_flag
		}

		triggers = {
			un_menu_main_un_icon_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_un_text_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_leader_frame_icon_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_leader_text_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_leader_name_text_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_leader_gladwyn_icon_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_members_button_visible = {
				has_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_focus_button_visible = {
				has_country_flag = UN_menu_main_main_flag
			}
		}
		
		effects = {
			un_menu_main_close_button_click = {
				clr_country_flag = UN_menu_open_flag
			}

			un_menu_main_members_button_click = {
				set_country_flag = UN_menu_open_members_flag
			}

			un_menu_main_main_button_click = {
				set_country_flag = UN_menu_main_main_flag
				clr_country_flag = UN_menu_main_council_flag
				clr_country_flag = UN_menu_main_departments_flag
			}

			un_menu_main_council_button_click = {
				set_country_flag = UN_menu_council_flag
				clr_country_flag = UN_menu_departments_flag
				clr_country_flag = UN_menu_main_main_flag
			}

			un_menu_main_departments_button_click = {
				set_country_flag = UN_menu_departments_flag
				clr_country_flag = UN_menu_main_main_flag
				clr_country_flag = UN_menu_main_council_flag
			}
		}
	}

	united_nations_members_ui = {
		context_type = player_context
		window_name = "un_menu_members"
		parent_window_name = "un_menu_main"

		visible = {
			has_country_flag = UN_menu_open_members_flag
		}

		properties = {
			un_menu_main_member_flag_icon = {
				image = [THIS.GetFlag]
			}
		}

		dynamic_lists = {
			un_members_list_gridbox = {
				array = global.members_of_un
				entry_container = un_members_list_entry
				change_scope = yes
			}
		}
		
		effects = {
			un_menu_members_close_button_click = {
				clr_country_flag = UN_menu_open_members_flag
			}
		}
	}
}

