DANUBIC_create_danubic_array = {
	every_country = {
		limit = {
			DANUBIC_is_danubic = yes 
		}
		add_to_array = {
			array = PREV.DANUBIC_array 	
		}
	}
	for_each_scope_loop = {
		array = DANUBIC_array
		log = "[THIS.GetName] is part of Danubia"
	}
}

DANUBIC_create_danubic_alliance = {
	#if = {
	#	limit = {
	#		NOT = { has_rule = can_create_factions }
 	#	}
 	#	set_rule = { 
 	#		can_create_factions = yes
 	#	}
	#}
	set_variable = {global.danubic_faction_creator = ROOT }
	if = {
		limit = { # Nordic Council 
			#NORDIC_has_started_democratic_focus_tree = yes
			DANUBIC_is_democratic = yes 
			DANUBIC_little_entente_viable = yes
		}
		set_global_flag = DANUBIC_little_entente_alliance_formed
		set_country_flag = DANUBIC_li_leader 
		set_faction_name = DANUBIC_li
		
		
		set_variable = { NORDIC_democratic_alliance_leader_dmod_research = 0 }
		set_variable = { NORDIC_democratic_alliance_leader_dmod_training_time = 0 }
		set_variable = { NORDIC_democratic_alliance_leader_dmod_prod_eff_start = 0 }
		set_variable = { NORDIC_democratic_alliance_leader_dmod_war_support = 0 }
		set_variable = { NORDIC_democratic_alliance_member_dmod_research = 0 }
		set_variable = { NORDIC_democratic_alliance_member_dmod_training_time = 0 }
		set_variable = { NORDIC_democratic_alliance_member_dmod_prod_eff_start = 0 }
		set_variable = { NORDIC_democratic_alliance_member_dmod_war_support = 0 }

		add_dynamic_modifier = { modifier = DANUBIC_li_leader_dmod }
		every_other_country = {
			limit = {
				DANUBIC_has_started_li_focus_tree = yes
				is_subject = no
			}
			#country_event = #write an event#
		}
	}
	else_if = {
		limit = {
			#NORDIC_has_started_communist_focus_tree = yes 
			DANUBIC_is_mon = yes 
		}
		set_global_flag = DANUBIC_cef_alliance_formed 
		set_country_flag = DANUBIC_cef_leader
		set_faction_name = DANUBIC_cef
		
		set_variable = { NORDIC_communist_alliance_leader_dmod_max_eff = 0 }
		set_variable = { NORDIC_communist_alliance_leader_dmod_max_planning = 0 }
		set_variable = { NORDIC_communist_alliance_leader_dmod_research = 0 }
		set_variable = { NORDIC_communist_alliance_leader_dmod_resource_penalty = 0 }
		set_variable = { NORDIC_democratic_alliance_member_dmod_max_eff = 0 }
		set_variable = { NORDIC_communist_alliance_member_dmod_max_planning = 0 }
		set_variable = { NORDIC_communist_alliance_member_dmod_research = 0 }
		set_variable = { NORDIC_communist_alliance_member_dmod_resource_penalty = 0 }

		add_dynamic_modifier = { modifier = DANUBIC_cef_leader_dmod }

		every_other_country = {
			limit = {
				DANUBIC_has_started_li_focus_tree = yes
				is_subject = no
			}
			#country_event = #write an event#
		}
	}  
	set_variable = { global.DANUBIC_alliance_leader = ROOT } # Setting the alliance leader regardless of ideology 
}
