den_debug = {

	den_capitulation_event = {
		complete_effect = {
			country_event = denmark.2
		}
	}

	den_increase_influence = {
		complete_effect = {
			add_to_variable = {
				den_lower_influence = 10
			}
			add_to_variable = { 
				den_middle_influence = 10
			}
			add_to_variable = {
				den_upper_influence = 10
			}
		}
	}
	den_decrease_influence = {
		complete_effect = {
			add_to_variable = {
				den_lower_influence = -10
			}
			add_to_variable = {
				den_middle_influence = -10
			}
			add_to_variable = {
				den_upper_influence = -10
			}
		}
	}
	den_lower_increase_loy = {
		complete_effect = {
			add_to_variable = {
				den_lower_loyalty = 10
			}
			add_to_variable = {
				den_middle_loyalty = 10
			}
			add_to_variable = {
				den_upper_loyalty = 10
			}
		}
	}
	den_lower_decrease_loy = {
		complete_effect = {
			add_to_variable = {
				den_lower_loyalty = -10
			}
			add_to_variable = {
				den_middle_loyalty = -10
			}
			add_to_variable = {
				den_upper_loyalty = -10
			}
		}
	}
	den_calculate = {
		complete_effect = {
			den_calculate_stratas = yes
		}
	}
}
DEN_political_landscape = {
	### STRATA INTERACTION

	DEN_Seize_Agricultural_Property = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_lower_eqilibrium_20_trigger
				check_variable = {
					den_lower_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_lower_loyalty_40_trigger
				check_variable = {
					den_lower_loyalty > 40
				}
			}
			#A year has passed since the focus Ally the Peasents was taken
		}
		visible = {
			check_variable = {
				den_lower_influence > 29
			}
		}
		cost = 30
		complete_effect = {
			add_to_variable = {
				den_lower_equilibrium = -10
			}
			custom_effect_tooltip = den_lower_eqilibrium_-10
			add_to_variable = {
				den_lower_loyalty = -20
			}
			custom_effect_tooltip = den_lower_loyalty_-20
			den_calculate_lower = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = DEN
				}
				add_extra_state_shared_building_slots = 1
			}
		}
		days_remove = 70
		days_re_enable = 140
	}

	DEN_Confiscate_Civilian_Vessels = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_middle_eqilibrium_20_trigger
				check_variable = {
					den_middle_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_middle_loyalty_40_trigger
				check_variable = {
					den_middle_loyalty > 40
				}
			}
		}
		visible = {
			check_variable = {
				den_middle_influence > 29
			}
		}
		cost = 80
		complete_effect = {
			add_to_variable = {
				den_middle_equilibrium = -10
			}
			custom_effect_tooltip = den_middle_eqilibrium_-10
			add_to_variable = {
				den_middle_loyalty = -20
			}
			custom_effect_tooltip = den_middle_loyalty_-20
			den_calculate_middle = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = convoy
				producer = DEN
				amount = 35
			}
		}
		days_remove = 70
		days_re_enable = 200
	}



	DEN_Nationalize_Vital_Industries = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_upper_eqilibrium_20_trigger
				check_variable = {
					den_upper_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_upper_loyalty_40_trigger
				check_variable = {
					den_upper_loyalty > 40
				}
			}
			OR = {
				AND = {
					has_government = democratic
					has_country_flag = socialdemokratiet_dominating
				}
				has_government = communism
				#fascism if a year has passed after completing industrialists support
			}
			any_owned_state = {
				is_core_of = DEN
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = no
				}
			}
		}
		visible = {
			check_variable = {
				den_upper_influence > 29
			}
		}
		cost = 100
		complete_effect = {
			add_to_variable = {
				den_upper_equilibrium = -10
			}
			custom_effect_tooltip = den_upper_eqilibrium_-10
			add_to_variable = {
				den_upper_loyalty = -20
			}
			custom_effect_tooltip = den_upper_loyalty_-20
			den_calculate_upper = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = DEN
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = no
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		days_remove = 70
		days_re_enable = 365
	}

	DEN_Reduce_Lower_Strata_Influence = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_lower_loyalty_25_trigger
				check_variable = {
					den_lower_loyalty > 25
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_lower_influence_20_trigger
				check_variable = {
					den_lower_influence > 20
				}
			}
		}
		visible = {
			check_variable = {
				den_lower_influence > 29
			}
		}
		cost = 75
		complete_effect = {
			add_to_variable = {
				den_lower_loyalty = -25
			}
			custom_effect_tooltip = den_lower_loyalty_-25
			add_to_variable = {
				den_lower_influence = -20
			}
			custom_effect_tooltip = den_lower_influence-20
			den_calculate_upper = yes
			den_calculate_eqilibirum = yes
		}
		days_re_enable = 365
	}

	DEN_Reduce_Middle_Strata_Influence = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_middle_loyalty_25_trigger
				check_variable = {
					den_middle_loyalty > 25
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_middle_influence_20_trigger
				check_variable = {
					den_middle_influence > 20
				}
			}
		}
		visible = {
			check_variable = {
				den_middle_influence > 29
			}
		}
		cost = 75
		complete_effect = {
			add_to_variable = {
				den_middle_loyalty = -25
			}
			custom_effect_tooltip = den_middle_loyalty_-25
			add_to_variable = {
				den_middle_influence = -20
			}
			custom_effect_tooltip = den_middle_influence-20
			den_calculate_upper = yes
			den_calculate_eqilibirum = yes
		}
		days_re_enable = 365
	}
	DEN_Reduce_Upper_Strata_Influence = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_upper_loyalty_25_trigger
				check_variable = {
					den_upper_loyalty > 25
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_upper_influence_20_trigger
				check_variable = {
					den_upper_influence > 20
				}
			}
		}
		visible = {
			check_variable = {
				den_upper_influence > 29
			}
		}
		cost = 75
		complete_effect = {
			add_to_variable = {
				den_upper_loyalty = -25
			}
			custom_effect_tooltip = den_upper_loyalty_-25
			add_to_variable = {
				den_upper_influence = -20
			}
			custom_effect_tooltip = den_upper_influence-20
			den_calculate_upper = yes
			den_calculate_eqilibirum = yes
		}
		days_re_enable = 365
	}
	### 
	DEN_reconsider_the_status_of_the_straits = {
		available = {
			NOT = {
				has_country_flag = {
					flag = straits_laws_changed
					days = 100
				}
			}
		}
		visible = {
			tag = DEN
			controls_state = 99
			controls_state = 37
			has_global_flag = copenhagen_convention_revoked
		}
		complete_effect = {
			clr_country_flag = straits_laws_changed
			country_event = {
				id = denmark.3
				hours = 0
			}
			set_country_flag = straits_laws_changed
		}
	}
	den_ships_seized = {
		
		icon = generic_political_discourse

		available = {
			has_completed_focus = DEN_Scuttle_the_Ships
		}

		days_mission_timeout = 365

		fire_only_once = yes

		activation = {
			always = no
		}
		visible = {
			hidden_trigger = {
				has_focus_tree = free_denmark
			}
		}
		cancel_if_not_visible = yes

		is_good = no
		
		complete_effect = {
			add_war_support = 0.05
			GER = {
				add_war_support = -0.05
			}
			set_country_flag = den_ships_scuttled
		}

		timeout_effect = {
			add_war_support = -0.1
			set_country_flag = den_ships_seized
		}
	}
	den_integrate_greenland = {
		cost = 50
		available = {
			has_war = no
		}
		visible = {
			date > 1948.1.1
			101 = {
				is_fully_controlled_by = ROOT
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		days_remove = 14
		remove_effect = {
			add_state_core = 101
		}
	}
	den_integrate_sweden = {
		cost = 150
		available = {
			any_owned_state = {
				is_core_of = SWE
				is_controlled_by = ROOT
			}
			core_compliance = {
				occupied_country_tag = SWE
				value > 50
			}
		}
		visible = {
			any_controlled_state = {
				is_core_of = SWE
				is_controlled_by = ROOT
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_cosmetic_tag = DEN_NOR
				}
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SCA
			}
			else = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SWE
			}
		}
		fire_only_once = yes
		days_remove = 14
		remove_effect = {
			every_owned_state = {
				limit = {
					is_core_of = SWE
				}
				add_core_of = ROOT
			}
		}
	}
	den_integrate_norway = {
		cost = 150
		available = {
			any_owned_state = {
				is_core_of = NOR
				is_controlled_by = ROOT
			}
			core_compliance = {
				occupied_country_tag = NOR
				value > 50
			}
		}
		visible = {
			any_controlled_state = {
				is_core_of = SWE
				is_controlled_by = ROOT
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					has_cosmetic_tag = DEN_SWE
				}
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SCA
			}
			else = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_NOR
			}
		}
		days_remove = 14
		remove_effect = {
			every_state = {	#Debating wheter or not to give cores on all controlled states
				limit = {
					is_core_of = NOR
				}
				add_core_of = ROOT
			}
		}
	}
	den_integrate_finland = {
		cost = 100
		available = {
			any_owned_state = {
				is_core_of = FIN
				is_controlled_by = ROOT
			}
			core_compliance = {
				occupied_country_tag = FIN
				value > 50
			}
		}
		visible = {
			has_cosmetic_tag = DEN_SCA
		}
		fire_only_once = yes
		days_remove = 14
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = FIN
				}
				add_core_of = ROOT
			}
			set_cosmetic_tag = DEN_KAL
		}
	}
	den_integrate_the_north_sea_islands = {
		cost = 25
		available = {
			any_owned_state = {
				is_north_sea_island = yes
				compliance > 50
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		visible = {
			has_cosmetic_tag = DEN_SCA
			any_owned_state = {
				is_north_sea_island = yes
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		fire_only_once = yes
		days_remove = 14
		remove_effect = {
			every_owned_state = {
				limit = {
					is_north_sea_island = yes
				}
				add_core_of = ROOT
			}
		}
	}
	
	den_invite_select_communist_ministers = {
		cost = 35
		available = {
			communism > 0.1
			has_country_flag = political_violence_resolved
		}
		visible = {
			has_completed_focus = DEN_Popular_Front_against_Fascism
			has_completed_focus = DEN_Strengthen_the_Labour_Unions
			has_government = democratic
		}
		complete_effect = {
			#Adds some lukewarm communist ministers
		}
	}
	den_encourage_volunteering_in_spain = {
		cost = 45
		icon = generic_military
		available = {
			SPR_scw_in_progress = yes
			has_manpower > 500
			any_country = {
				original_tag = SPR
				has_war = yes
				OR = {
					has_government = democratic
					has_government = communism
				}
			}
		}
		fire_only_once = yes
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = { has_global_flag = scw_over }
		}
		complete_effect = {
			add_manpower = -500			
		}
		remove_effect = {
			set_country_flag = den_scw_volunteers_sent
			random_country = {
				limit = {
					original_tag = SPR
					has_war = yes
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
				add_manpower = 500
				add_opinion_modifier = {
					target = DEN
					modifier = POR_helped_in_civil_war
				}
				save_global_event_target_as = den_scw_volunteer_receiver
			}
			custom_effect_tooltip = den_scw_volunteering_tt
		}
		days_remove = 45
	}
}

#									#
#	POLITICAL VIOLENCE WHOOOHOOO	#
#									#

DEN_political_violence = {
	den_upcoming_political_violence = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		priority = 50
		icon = revolt
		is_good = no
		days_mission_timeout = var:den_vio_days
		timeout_effect = {
			den_calculate_violence_odds = yes
			random_list = {
				var:com_odds = {	#communists win
					if = {
						limit = {
							has_completed_focus = DEN_Popular_Front_against_Fascism
						}
						country_event = denmark.53
					}
					else = {
						country_event = denmark.50
					}
				}
				var:stale_odds = {	#stalemate
					country_event = denmark.52
				}
				var:fasc_odds = {	#fascists win
					country_event = denmark.51
				}
			}
			den_generate_violence_name = yes
			set_variable = {
				political_violence_consequence = -0.075
			}
		}
	}
	### DEMOCRATIC COUNTER MEASURES
	den_increase_police_presence = {
		cost = 25
		icon = generic_police_action
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_completed_focus = DEN_Initiate_Economic_Reforms
				has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			#Reduces the consequences of the upcoming violence
			add_to_variable = {
				stale_odds = 1
			}
			custom_effect_tooltip = den_increased_police_tt
			add_to_variable = {
				political_violence_consequence = 0.025
			}
		}
	}
	den_investigate_extremists = {
		cost = 30
		icon = generic_brainwash
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_completed_focus = DEN_Initiate_Economic_Reforms
				has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		complete_effect = {
			add_to_variable = {
				stale_odds = 1
			}
			custom_effect_tooltip = den_slightly_increase_stale_tt
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 50
			}
		}
	}
	den_deradicalisation_programs = {
		cost = 100
		icon = generic_brainwash
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_completed_focus = DEN_Initiate_Economic_Reforms
				has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		fire_only_once = yes
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		complete_effect = {
			set_country_flag = den_deradicalisation_programs
			custom_effect_tooltip = den_permantent_increase_stale_tt
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 30
			}
		}
	}
	### FASCIST COUNTER MEASURES
	den_recruit_additional_blackshirts = {
		cost = 125
		fire_only_once = yes
		icon = eng_blackshirt_march
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		remove_effect = {
			#Strengthens the Fascists in all future street clashes
			custom_effect_tooltip = den_additional_blackshirts_tt
			add_to_variable = {
				fasc_odds = 2
			}
			set_country_flag = den_additional_blackshirts
		}
	}
	den_draw_upon_the_schleswig_germans = {
		cost = 40
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = ger_reichskommissariats
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			custom_effect_tooltip = den_strengthen_fascists_tt
			add_to_variable = {
				fasc_odds = 2
			}
		}
	}
	den_raid_dkp_headquarters = {
		cost = 50
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_scorched_earth
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens the Fascists in next street clash + stab hit
			custom_effect_tooltip = den_lower_com_odds_tt
			add_to_variable = {
				com_odds = -2
			}
			custom_effect_tooltip = den_higher_stab_tt
			add_to_variable = {
				political_violence_consequence = -0.025
			}
		}
	}
	den_industrialist_support = {
		cost = 35
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_industry
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_completed_focus = DEN_Secure_Industrialists_Support
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			custom_effect_tooltip = den_strengthen_fascists_tt
			add_to_variable = {
				fasc_odds = 2
			}
		}
	}
	### ANTI FASCIST COUNTER MEASURES
	den_mobilize_the_common_worker = {
		cost = 125
		fire_only_once = yes
		icon = generic_political_discourse
		days_remove = -1
		complete_effect = {
			#Strengthens the Communists in all future street clashes
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				custom_effect_tooltip = den_af_common_worker_tt
			}
			else = {
				custom_effect_tooltip = den_common_worker_tt
			}
			add_to_variable = {
				com_odds = 2
			}
			set_country_flag = den_common_worker
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
	}
	den_provoke_the_SA = {
		cost = 20
		icon = generic_civil_support
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = -20
			}
			custom_effect_tooltip = den_slightly_higher_stab_tt
			add_to_variable = {
				political_violence_consequence = -0.05
			}
		}
	}
	den_get_the_unions_involved = {
		cost = 50
		icon = eng_trade_unions_support
		available = {
			has_active_mission = den_upcoming_political_violence
			if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				has_completed_focus = DEN_Unify_the_Socialist_Movement
			}
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens the Anti Fascists for the next clash
			add_to_variable = {
				com_odds = 2
			}
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				custom_effect_tooltip = den_strengthen_anti_fascists_tt
			}
			else = {
				custom_effect_tooltip = den_strengthen_communists_tt
			}
		}
	}
	den_rural_support = {
		cost = 50
		icon = generic_shovels
		available = {
			has_active_mission = den_upcoming_political_violence
			has_completed_focus = DEN_Ally_the_Peasents
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 10
			}
			add_to_variable = {
				com_odds = 2
			}
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				custom_effect_tooltip = den_strengthen_anti_fascists_tt
			}
			else = {
				custom_effect_tooltip = den_strengthen_communists_tt
			}
		}
	}
	## SOCIAL DEMOCRATIC COUNTER MEASURES

	## COMMUNIST COUNTER MEASURES
	den_expand_social_democratic_participation = {
		cost = 35
		icon = eng_trade_unions_demand
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_completed_focus = DEN_Popular_Front_against_Fascism
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens anti fascist for next street clash, slightly increases democratic popularity
			if = {
				limit = {
					has_country_flag = socialdemokratiet_dominating
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.02
				}
			}
			else = {
				add_popularity = {
					ideology = neutrality
					popularity = 0.02
				}
			}
			add_to_variable = {
				com_odds = 2
			}
			custom_effect_tooltip = den_strengthen_anti_fascists_tt
		}
	}
	### SHARED COUNTER MEASURES
	den_propaganda_efforts = {
		cost = 80
		available = {
			has_active_mission = den_upcoming_political_violence
			if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				has_completed_focus = DEN_Propaganda_Campaigns
			}
		}
		icon = eng_propaganda_campaigns
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				custom_effect_tooltip = den_strengthen_anti_fascists_tt
				add_to_variable = {
					com_odds = 2
				}
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				custom_effect_tooltip = den_strengthen_communists_tt
				add_to_variable = {
					com_odds = 2
				}
			}
			else = {
				custom_effect_tooltip = den_strengthen_fascists_tt
				add_to_variable = {
					fasc_odds = 2
				}
			}
		}
	}
	den_political_assassination = {
		cost = 50
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_assassination
		days_remove = -1
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_completed_focus = DEN_Galvanise_the_German_Minority
				}
				add_to_variable = {
					com_odds = -2
				}
				custom_effect_tooltip = den_lower_com_odds_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				add_to_variable = {
					fasc_odds = -2
				}
				custom_effect_tooltip = den_lower_fasc_odds_tt
			}
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = -20
			}
		}
	}
	den_sabotage_police_efforts = {
		cost = 50
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_civil_support
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
			has_active_mission = den_upcoming_political_violence
		}
		complete_effect = {
			custom_effect_tooltip = den_slightly_decrease_stale_tt
			add_to_variable = {
				stale_odds = -2
			}
			custom_effect_tooltip = den_slightly_higher_stab_tt
			add_to_variable = {
				political_violence_consequence = -0.05
			}
		}
	}
	den_encourage_restraint = {
		cost = 30
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_scales
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
			has_active_mission = den_upcoming_political_violence
		}
		complete_effect = {
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				add_to_variable = {
					com_odds = -1
				}
				custom_effect_tooltip = den_slightly_decreases_anti_fascist_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				add_to_variable = {
					com_odds = -1
				}
				custom_effect_tooltip = den_slightly_decreases_communist_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_Galvanise_the_German_Minority
				}
				add_to_variable = {
					fasc_odds = -1
				}
				custom_effect_tooltip = den_slightly_decreases_fascist_tt
			}
			custom_effect_tooltip = den_slightly_lower_stab_tt
			add_to_variable = {
				political_violence_consequence = 0.05
			}
		}
	}

}
economy_decisions = {
	den_devalued_krone = {
		icon = ger_mefo_bills
		activation = {
			always = no
		}
		available = {
			OR = {
				has_completed_focus = DEN_North_Sea_Trade_Agreement
				has_completed_focus = DEN_Nordic_Customs_Union
				has_completed_focus = DEN_Munch_Ribbentrop_Pakt
				has_completed_focus = DEN_Dano_Soviet_Trade_Agreement
			}
		}
		priority = 50
		is_good = no
		days_mission_timeout = 365
		complete_effect = {
			add_political_power = 15
		}
		timeout_effect = {
			add_timed_idea = {
				idea = den_economic_hardship
				days = 300
			}
		}
	}
}
den_kpd_contacts = {
	test123 = {
		cost = 5
	}
	den_establish_local_chapter = {
		ai_will_do = {
			factor = 10
		}
		icon = generic_speech
		available = {

		}
		on_map_mode = map_and_decisions_view
		state_target = yes
		visible = {
			FROM = {
				is_fully_controlled_by = GER
				is_core_of = GER
				NOT = {
					has_state_flag = den_kpd_established
				}
			}
		}
		days_remove = 50

		fire_only_once = yes

		cost = 50
		
		targets = {
			66 64 58 54 56 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
		}
		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_established
			}
			GER = {
				add_popularity = {
					ideology = communism
					popularity = 0.025
				}
			}
		}
	}

	
	
	den_sabotage_industrial_centers = {
		ai_will_do = {
			factor = 10
		}
		icon = revolt
		available = {

		}
		on_map_mode = map_and_decisions_view
		state_target = yes
		visible = {
			FROM = {
				is_fully_controlled_by = GER
				is_core_of = GER
				has_state_flag = den_kpd_established
			}
		}
		days_remove = 35

		fire_only_once = yes

		cost = 30
		
		targets = {
			66 64 58 56 54 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
			industrial_capacity_factory = -0.3
		}

		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_sabotage
				random_list = {
					30 = {
						#Sabotage Military Industry
					}
					40 = {
						#Sabotage Civilian Industry
					}
					30 = {
						#Sabotage Failed
						GER = {
							add_popularity = {
								ideology = fascism
								popularity = 0.01
							}
						}
					}
				}
			}
		}
	}
	den_sabotage_frontlines = {
		ai_will_do = {
			factor = 20
		}
		icon = GFX_decision_railroads
		available = {
			FROM = {
				OR = {
					any_neighbor_state = {
						has_state_flag = den_kpd_established
					}
					FROM = {
						has_state_flag = den_kpd_established
					}
				}
			}
		}
		state_target = yes
		visible = {
			FROM = {
				is_controlled_by = GER
				is_core_of = GER
				any_neighbor_state = {
					is_controlled_by = DEN
				}
			}
		}
		on_map_mode = map_only
		days_remove = 20

		fire_only_once = yes

		cost = 50
		
		target_array = GER.core_states
		
		modifier = {
			political_power_cost = 0.5
		}

		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_front_sabotage
				custom_effect_tooltip = "damage" # state modifier
			}
		}
	}
	den_call_upon_the_partisans = {
		ai_will_do = {
			factor = 20
		}
		icon = attache
		available = {
			has_war_with = GER
			FROM = {
				has_state_flag = den_kpd_established				
			}
		}
		state_target = yes
		visible = {
			FROM = {
				is_core_of = GER
				is_controlled_by = GER
				has_state_flag = den_kpd_established
				NOT = { has_state_flag = den_kpd_partisan }
			}
		}
		on_map_mode = map_only
		days_remove = 20

		fire_only_once = yes

		cost = 50
		
		targets = {
			66 64 58 56 54 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
		}

		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_partisan
				hidden_effect = {
					if = {	#Berlin shouldnt get instantly taken
						limit = {
							state = 64
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							prioritize_location = 3522
							owner = ROOT
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							prioritize_location = 3522
							owner = ROOT
						}
					}
					else = {
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
						}
					}
				}
				custom_effect_tooltip = den_kpd_partisan_uprising_tt
			}
		}
	}
}
#For now unfitting
#DEN_communist_organisation = {
#	
#	### <> The Union <> ###
#	den_rally_the_light_industrial_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 1
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.51
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 1 }
#		}
#		modifier = {
#			consumer_goods_factor = 0.25
#			production_speed_buildings_factor = -0.33
#		}
#		days_remove = 45
#	}
#	den_rally_the_heavy_industrial_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 2
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.52
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 2 }
#		}
#		modifier = {
#			industrial_capacity_factory = -0.5
#			production_speed_arms_factory_factor = -0.5
#		}
#		days_remove = 45
#	}
#	den_rally_the_mining_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 3
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.53
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 3 }
#		}
#		modifier = {
#			local_resources_factor = -0.33
#		}
#		days_remove = 45
#	}
#	### <> The Party <> ###
#	den_invite_kpd_partisans = {
#		available = {
#			GER = {
#				OR = {
#					has_government = fascism
#					has_government = neutrality
#				}
#			}
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 4
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {	
#			den_strengthen_party = yes	
#			country_event = denmark.61	
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 4 }
#		}
#		modifier = {
#			
#		}
#		days_remove = 45
#	}
#	den_urban_demonstrations = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 5
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {	
#			den_strengthen_party = yes
#			country_event = denmark.62	
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 5 }
#		}
#		modifier = {
#			consumer_goods_factor = 0.1
#		}
#		days_remove = 45
#	}
#	den_rally_the_sailors = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 6
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_party = yes
#			country_event = denmark.63
#		}
#		modifier = {
#			experience_gain_navy_factor = -1
#			naval_speed_factor = -0.80
#			industrial_capacity_dockyard = -0.5
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 6 }
#		}
#		days_remove = 45
#	}
#	den_rally_college_students = {
#		available = {
#			has_completed_focus = DEN_Expand_the_Copenhagen_University
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 7
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_party = yes
#			country_event = denmark.64
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 7 }
#		}
#		modifier = {
#			research_speed_factor = -0.1
#		}
#		days_remove = 45
#	}
#}