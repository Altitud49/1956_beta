integration_mongolian_lands_category = {

	MON_decision_integrate_tuva = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = TAN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 329
			NOT = {
				329 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 329
			NOT = {
				329 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 329 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 329
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_mongolia = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 330
			NOT = {
				330 = { is_core_of = ROOT }
			}
			controls_state = 848
			NOT = {
				848 = { is_core_of = ROOT }
			}
			controls_state = 849
			NOT = {
				849 = { is_core_of = ROOT }
			}
			controls_state = 850
			NOT = {
				850 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 330
			NOT = {
				330 = { is_core_of = ROOT }
			}
			controls_state = 848
			NOT = {
				848 = { is_core_of = ROOT }
			}
			controls_state = 849
			NOT = {
				849 = { is_core_of = ROOT }
			}
			controls_state = 850
			NOT = {
				850 = { is_core_of = ROOT }
			}
		}

		highlight_states = {
			state = 330
			state = 848
			state = 849
			state = 850
		}

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 330
			add_state_core = 848
			add_state_core = 849
			add_state_core = 850
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_south_chahar = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 611
			NOT = {
				611 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 611
			NOT = {
				611 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 611 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 611
		}
		
		ai_will_do = {
			factor = 10
		}
	}
	MON_decision_integrate_north_chahar = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 612
			NOT = {
				612 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 612
			NOT = {
				612 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 612 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 612
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_suiyuan = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 621
			NOT = {
				621 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 621
			NOT = {
				621 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 621 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 621
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_ordos = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 746
			NOT = {
				746 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 746
			NOT = {
				746 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 746 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 746
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_jiuquan = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 756
			NOT = {
				756 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 756
			NOT = {
				756 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 756 }		

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 756
		}
		
		ai_will_do = {
			factor = 10
		}
	}

	MON_decision_integrate_buryatia = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 564
			NOT = {
				564 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 564
			NOT = {
				564 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 564 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 564
		}
		
		ai_will_do = {
			factor = 10
		}
	}
	MON_decision_integrate_irkutsk = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		visible = {
			controls_state = 566
			NOT = {
				566 = { is_core_of = ROOT }
			}
		}
		
		available = {
			controls_state = 566
			NOT = {
				566 = { is_core_of = ROOT }
			}
		}

		highlight_states = { state = 566 }

		cost = 50

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_state_core = 566
		}
		
		ai_will_do = {
			factor = 10
		}
	}
}
propaganda_efforts = {
	MON_go_on_pilgrimage_to_the_burkhan_khaldun = {
	
		icon = generic_nationalism
		
		allowed = {
			OR = {
				original_tag = MON
				original_tag = TAN
				original_tag = MEN
				original_tag = BUR
			}
			
		}

		fire_only_once = yes

		visible = {
			849 = { is_core_of = ROOT }
			has_government = fascism
		}
		
		available = {
			controls_state = 849
			has_war_support > 0.5
		}

		highlight_states = { state = 849 }

		cost = 60

		days_remove = 60

		cancel_if_not_visible = yes
		
		remove_effect = {
			add_country_leader_trait = spirit_of_genghis
		}
		
		ai_will_do = {
			factor = 10
		}
	}
}

MON_strenghten_mongolbank_category  = {
	
	MON_increase_production_quotas = {
		
		icon = generic_factory

		allowed = { 
			original_tag = MON
		}

		visible = {
			has_completed_focus = MON_strenghten_tugrik
		}
		
		available = {
			NOT = {
				has_idea = Mongolbank_very_high_funds
			}
		}

		days_remove = 30
		days_re_enable = 180

		cost = 50

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			add_ideas = MON_production_quotas_increased
		}

		remove_effect = {
			remove_ideas = MON_production_quotas_increased
			MON_mongol_bank_funds_increase = yes
		}
	}

	MON_reduce_scientists_funding = {
		
		icon = generic_research

		allowed = { 
			original_tag = MON
		}
		
		fire_only_once = yes

		visible = {
			has_completed_focus = MON_strenghten_tugrik
		}
		
		available = {
			NOT = {
				has_idea = Mongolbank_very_high_funds
			}
		}

		days_remove = 30
		days_re_enable = 120

		cost = 50

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			add_ideas = MON_reduced_scientists_funding_idea
		}

		remove_effect = {
			remove_ideas = MON_reduced_scientists_funding_idea
			MON_mongol_bank_funds_increase = yes
		}
	}

	MON_appropriate_civilian_goods = {
		
		icon = generic_construction

		allowed = { 
			original_tag = MON
		}
		
		fire_only_once = yes

		visible = {
			has_completed_focus = MON_strenghten_tugrik
		}
		
		available = {
			NOT = {
				has_government = democratic
			}
			NOT = {
				has_idea = Mongolbank_very_high_funds
			}
			has_stability > 0.50
		}

		days_re_enable = 90

		cost = 50

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			add_stability = -0.10
			MON_mongol_bank_funds_increase = yes
		}
	}

	MON_decrease_army_funding = {
		
		icon = generic_operation

		allowed = { 
			original_tag = MON
		}
		
		fire_only_once = yes

		visible = {
			has_completed_focus = MON_strenghten_tugrik
		}
		
		available = {
			has_war = no
			NOT = {
				has_idea = Mongolbank_very_high_funds
			}
			has_war_support > 0.50
		}

		days_re_enable = 150

		cost = 50

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			add_war_support = -0.10
			MON_mongol_bank_funds_increase = yes
		}
	}

	MON_buy_currency_abroad = {
		
		icon = ger_mefo_bills

		allowed = { 
			original_tag = MON
		}
		
		fire_only_once = yes

		visible = {
			has_completed_focus = MON_strenghten_tugrik
		}
		
		available = {
			has_war = no
			NOT = {
				has_idea = Mongolbank_very_high_funds
			}
		}

		days_remove = 60
		days_re_enable = 120

		cost = 80

		ai_will_do = {
			factor = 5
		}

		complete_effect = {
			add_ideas = MON_buying_currency_abroad
		}

		remove_effect = {
			remove_ideas = MON_buying_currency_abroad
			MON_mongol_bank_funds_increase = yes
		}
	}
}


##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################
##########################################################################

#### The beginning of the focus tree where the political path is decided
MON_1935_state_visit_to_moscow_category = {
	MON_external_policy_negotiations = {

		icon = GFX_decision_generic_special_project

		available = {
			hidden_trigger = { always = no }
		}

		priority = 10

		days_mission_timeout = 25

		fire_only_once = yes

		activation = {
			tag = MON 
		}

		visible = {
			has_country_leader = { ruling_only = yes name = "Peljidiin Genden" }
		}

		cancel_if_not_visible = yes

		is_good = no

		timeout_effect = {
			MON = {
				country_event = {
					id = mongol.13
					days = 2
				}
			}
		}
	}

	MON_discuss_the_defence_of_mongolian_state = {
		icon = generic_prepare_civil_war

		available = {
			always = yes
		}

		visible = {
			has_government = communism 
			is_in_faction_with = SOV
			has_country_leader = { ruling_only = yes name = "Peljidiin Genden" }
		}
		
		ai_will_do = {
			factor = 10
		}

		fire_only_once = yes
		
		cancel_if_not_visible = yes

		complete_effect = {
			set_country_flag = MON_defence_discussion_in_progress
			unlock_decision_tooltip = MON_propose_mutual_assistance_treaty
			unlock_decision_tooltip = MON_suggest_mongolian_self_reliance
		}
	}

	MON_propose_mutual_assistance_treaty = {
		icon = hol_attract_foreign_investors

		cost = 5
		available = {
			has_government = communism 
			is_in_faction_with = SOV
			NOT = { has_country_flag = mon_1935_defence_soviet_yes_self_reliance }
		}

		visible = {
			has_government = communism 
			is_in_faction_with = SOV
			has_country_flag = MON_defence_discussion_in_progress
		}

		
		ai_will_do = {
			factor = 10
		}

		fire_only_once = yes

		complete_effect = {
			SOV = {
				country_event = {
					id = mongol.2
					hours = 2
				}
			}
		}
	}

	MON_suggest_mongolian_self_reliance = {
		icon = generic_political_discourse

		cost = 10
		available = {
			is_in_faction_with = SOV
		}

		visible = {
			has_government = communism 
			is_in_faction_with = SOV
			has_country_flag = MON_defence_discussion_in_progress
			NOT = { has_country_flag = mon_1935_defence_soviet_yes_assistance }
		}

		
		ai_will_do = {
			factor = 1
		}

		fire_only_once = yes

		complete_effect = {
			SOV = {
				country_event = {
					id = mongol.5
					hours = 2
				}
			}
		}
	}

	MON_threat_stalin_with_japan = {
		icon = generic_ignite_civil_war

		custom_cost_text = r56_10_command_power_cost
		custom_cost_trigger = {
			command_power > 10
		}
		available = { 
			is_in_faction_with = SOV
		}

		visible = {
			has_government = communism 
			is_in_faction_with = SOV
			has_country_leader = { ruling_only = yes name = "Peljidiin Genden" }
		}

		
		ai_will_do = {
			factor = 0.1
		}

		fire_only_once = yes

		complete_effect = {
			hidden_effect = {
				add_command_power = -10
			}
			SOV = {
				country_event = {
					id = mongol.8
					hours = 2
				}
			}
		}
	}
}






















MON_on_the_crossroads_of_the_world_category = {

	MON_seek_soviet_support = {

		icon = eng_trade_unions_support

		allowed = {
			tag = MON
		}

		available = {
			SOV = {
				exists = yes
			}
		}

		targets = { SOV }

		target_trigger = {
			FROM = {
				tag = SOV
			}
		}

		days_remove = 10

		cost = 50

		fire_only_once = no

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				is_historical_focus_on = yes
				date > 1940.01.01
			}
		}

		complete_effect = {
		}

		remove_effect = {
			SOV = { add_to_variable = { var = sov_influence_in_mon value = 5 } }
			set_variable = { var = sov_temp_influence value = SOV.sov_influence_in_mon }
			subtract_from_variable = { var = sov_temp_influence value = JAP.jap_influence_in_mon }
			set_variable = { var = jap_temp_influence value = JAP.jap_influence_in_mon }
			subtract_from_variable = { var = jap_temp_influence value = SOV.sov_influence_in_mon }
			hidden_effect = {
				random_list = {
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 20 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 25 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 30 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 35 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 40 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 45 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 50 }
					}
				}
			}
		}
	}

	MON_seek_japanese_support = {

		icon = eng_trade_unions_support

		allowed = {
			tag = MON
		}

		available = {
			JAP = {
				exists = yes
			}
		}

		targets = { JAP }

		target_trigger = {
			FROM = {
				tag = JAP
			}
		}

		days_remove = 10

		cost = 10

		fire_only_once = no

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				is_historical_focus_on = yes
				date > 1940.01.01
			}
		}

		complete_effect = {
		}

		remove_effect = {
			JAP = { add_to_variable = { var = jap_influence_in_mon value = 5 } }
			set_variable = { var = jap_temp_influence value = JAP.jap_influence_in_mon }
			subtract_from_variable = { var = jap_temp_influence value = SOV.sov_influence_in_mon }
			set_variable = { var = sov_temp_influence value = SOV.sov_influence_in_mon }
			subtract_from_variable = { var = sov_temp_influence value = JAP.jap_influence_in_mon }
			hidden_effect = {
				random_list = {
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 20 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 25 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 30 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 35 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 40 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 45 }
					}
					10 = {
						set_country_flag = { flag = MON_crossroads_of_the_world_ai_timer_flag value = 1 days = 50 }
					}
				}
			}
		}
	}
}


########################################################################
########################################################################
########################################################################
########################################################################
########################################################################

MON_raids_operations_category = {
	MON_commit_small_raid = {
		icon = border_war		

		available = {
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					any_neighbor_state = {
						is_fully_controlled_by = ROOT
						set_temp_variable = { var:attacker_state_temp = id }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					}
					NOT = { has_state_flag = border_incident_active }
					set_temp_variable = { var:defender_state_temp = id }
				}
			}
			NOT = { has_non_aggression_pact_with = FROM }
		}

		visible = {
			FROM = { exists = yes }
			NOT = { has_war_with = FROM }
			#FROM = { has_not_initiated_border_incident_with_ROOT = yes }	#may be a viable option for future
			FROM = {
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					is_in_faction_with = ROOT
				}
			}
			NOT = {
				is_subject_of = FROM
			}

			NOT = { has_border_war_with = FROM }
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					any_neighbor_state = {
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						is_fully_controlled_by = ROOT
						has_ROOT_at_least_1_div_in_current_state_scope = yes
					}
				}
			}
		}

		target_root_trigger = {
			original_tag = MON
			OR = {
				has_country_flag = mon_1935_defence_soviet_yes_assistance
				has_country_flag = mon_1935_defence_soviet_yes_self_reliance
			}
		}
		target_array = neighbors

		target_trigger = {
			FROM = { 
				OR = {
					original_tag = JAP
					original_tag = MAN
					original_tag = MEN
					is_literally_china = yes
				}
				NOT = { has_government = MON }
			}
		}
		allowed = {
			original_tag = MON
		}

		highlight_states = {
			OR = {
				state = FROM.defender_state_vs_@ROOT
				AND = {
					is_owned_and_controlled_by = FROM
					hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					any_neighbor_state = {
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						is_fully_controlled_by = ROOT
					}
				}
			}
		}

		ai_will_do = {
			base = 10
		}

		custom_cost_text = r56_10_command_power_cost
		custom_cost_trigger = {
			command_power > 10
		}

		fire_only_once = no

		days_remove = 4
		days_re_enable = 21

		war_with_target_on_remove = no

		complete_effect = {
			hidden_effect = {
				add_command_power = -10
				FROM = {
					random_owned_controlled_state = {
						limit = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
								has_ROOT_at_least_1_div_in_current_state_scope = yes
								is_fully_controlled_by = ROOT
							}
						}
						save_event_target_as = defender_state
						set_variable = { FROM.defender_state_vs_@ROOT = id }
						set_temp_variable = { defender_state_temp = id }
						set_state_flag = border_incident_active
					}
				}
				random_state = {
					limit = {
						is_fully_controlled_by = ROOT
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
					set_state_flag = border_incident_active
				}
			}
			custom_effect_tooltip = MON_border_clashes_small_raid_21
			FROM = {
				country_event = { id = mongol.19 hours = 6 }		
			}
		}
		remove_effect = {
			hidden_effect = {
				var:FROM.defender_state_vs_@ROOT = {
					save_event_target_as = defender_state 
				}
				var:FROM.attacker_state_vs_@ROOT = {
					save_event_target_as = attacker_state 
				}
				FROM = {
					random_owned_controlled_state = {
						limit = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								is_fully_controlled_by = ROOT
								has_ROOT_at_least_1_div_in_current_state_scope = yes
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							}
						}
						set_temp_variable = { defender_state_temp = id }
					}
				}
				random_state = {
					limit = {
						is_fully_controlled_by = ROOT
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					set_temp_variable = { attacker_state_temp = id }
				}
			}
			if = {
				limit = {
					FROM = {
						has_country_flag = MON_raid_ignored
					}
				}
				ROOT = {
					country_event = { id = mongol.20 }
				}
				FROM = {
					var:attacker_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					var:defender_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					clear_variable = attacker_state_vs_@ROOT
					clear_variable = defender_state_vs_@ROOT
				}
			}
			else = {
				custom_effect_tooltip = MON_border_clashes_small_raid_warning
				start_border_war = {
					change_state_after_war = no
					combat_width = 20
					minimum_duration_in_days = 2
					attacker = {
						state = var:FROM.attacker_state_vs_@ROOT
						num_provinces = 1
						on_win = mongol.20
						on_lose = mongol.21
						on_cancel = mongol.22
					}
					
					defender = {
						state = var:FROM.defender_state_vs_@ROOT
						num_provinces = 1
						on_win = mongol.23
						on_lose = mongol.24
						on_cancel = mongol.25
					}
				}
				activate_targeted_decision = { target = FROM decision = MON_small_raid_cancelled }
				FROM = {
					activate_targeted_decision = { target = ROOT decision = MON_small_raid_cancelled }
				}
			}
		}
	}

	#Mission for Mongolia to finish the raid in 7 days
	MON_small_raid_cancelled = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			var:FROM.defender_state_vs_@ROOT = { has_border_war = no }
			var:FROM.attacker_state_vs_@ROOT = { has_border_war = no }
		}
		
		highlight_state_targets = {
			state = var:defender_state_temp
			state = var:FROM.defender_state_vs_@ROOT
		}

		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 7
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		timeout_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				cancel_border_war = {
					defender = var:defender_state_vs_@FROM
					attacker = var:attacker_state_vs_@FROM
				}
			}
			else = {
				cancel_border_war = {
					defender = var:FROM.defender_state_vs_@ROOT
					attacker = var:FROM.attacker_state_vs_@ROOT
				}
			}
		}
	}

	#Big raids
	MON_commit_big_raid = {
		icon = civil_war		

		available = {
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					any_neighbor_state = {
						is_fully_controlled_by = ROOT
						set_temp_variable = { var:attacker_state_temp = id }
						has_ROOT_at_least_3_div_in_current_state_scope = yes
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					}
					NOT = { has_state_flag = border_incident_active }
					set_temp_variable = { var:defender_state_temp = id }
				}
			}
			NOT = { has_non_aggression_pact_with = FROM }
		}

		visible = {
			FROM = { exists = yes }
			NOT = { has_war_with = FROM }
			#FROM = { has_not_initiated_border_incident_with_ROOT = yes }	#may be a viable option for future
			FROM = {
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					is_in_faction_with = ROOT
				}
			}
			NOT = {
				is_subject_of = FROM
			}

			NOT = { has_border_war_with = FROM }
			FROM = {
				any_owned_state = {
					is_controlled_by = FROM
					hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					any_neighbor_state = {
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						is_fully_controlled_by = ROOT
						has_ROOT_at_least_3_div_in_current_state_scope = yes
					}
				}
			}
		}

		target_root_trigger = {
			original_tag = MON
			OR = {
				has_country_flag = mon_1935_defence_soviet_yes_assistance
				has_country_flag = mon_1935_defence_soviet_yes_self_reliance
			}
		}
		target_array = neighbors

		target_trigger = {
			FROM = { 
				OR = {
					original_tag = JAP
					original_tag = MAN
					original_tag = MEN
					is_literally_china = yes
				}
				NOT = { has_government = MON }
			}
		}
		allowed = {
			original_tag = MON
		}

		highlight_states = {
			OR = {
				state = FROM.defender_state_vs_@ROOT
				AND = {
					is_owned_and_controlled_by = FROM
					hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
					any_neighbor_state = {
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_3_div_in_current_state_scope = yes
						is_fully_controlled_by = ROOT
					}
				}
			}
		}

		ai_will_do = {
			base = 10
		}

		custom_cost_text = r56_25_command_power_cost
		custom_cost_trigger = {
			command_power > 25
		}

		fire_only_once = no

		days_remove = 14
		days_re_enable = 90

		war_with_target_on_remove = no

		complete_effect = {
			hidden_effect = {
				add_command_power = -25
				FROM = {
					random_owned_controlled_state = {
						limit = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
								has_ROOT_at_least_3_div_in_current_state_scope = yes
								is_fully_controlled_by = ROOT
							}
						}
						save_event_target_as = defender_state
						set_variable = { FROM.defender_state_vs_@ROOT = id }
						set_temp_variable = { defender_state_temp = id }
						set_state_flag = border_incident_active
					}
				}
				random_state = {
					limit = {
						is_fully_controlled_by = ROOT
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_3_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
					set_state_flag = border_incident_active
				}
			}
			custom_effect_tooltip = MON_border_clashes_big_raid_120
			FROM = {
				country_event = { id = mongol.19 hours = 6 }		
			}
		}
		remove_effect = {
			hidden_effect = {
				var:FROM.defender_state_vs_@ROOT = {
					save_event_target_as = defender_state 
				}
				var:FROM.attacker_state_vs_@ROOT = {
					save_event_target_as = attacker_state 
				}
				FROM = {
					random_owned_controlled_state = {
						limit = {
							hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							any_neighbor_state = {
								is_fully_controlled_by = ROOT
								has_ROOT_at_least_3_div_in_current_state_scope = yes
								hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
							}
						}
						set_temp_variable = { defender_state_temp = id }
					}
				}
				random_state = {
					limit = {
						is_fully_controlled_by = ROOT
						hidden_trigger = { NOT = { has_state_flag = border_incident_active } }
						has_ROOT_at_least_3_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					set_temp_variable = { attacker_state_temp = id }
				}
			}
			if = {
				limit = {
					FROM = {
						has_country_flag = MON_raid_ignored
					}
				}
				ROOT = {
					country_event = { id = mongol.20 }
				}
				FROM = {
					var:attacker_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					var:defender_state_vs_@ROOT = {
						clr_state_flag = border_incident_active
					}
					clear_variable = attacker_state_vs_@ROOT
					clear_variable = defender_state_vs_@ROOT
				}
			}
			else = {
				custom_effect_tooltip = MON_border_clashes_big_raid_warning
				start_border_war = {
					change_state_after_war = no
					combat_width = 60
					minimum_duration_in_days = 7
					attacker = {
						state = var:FROM.attacker_state_vs_@ROOT
						num_provinces = 2
						on_win = mongol.26
						on_lose = mongol.27
						on_cancel = mongol.28
					}
					
					defender = {
						state = var:FROM.defender_state_vs_@ROOT
						num_provinces = 2
						on_win = mongol.29
						on_lose = mongol.30
						on_cancel = mongol.31
					}
				}
				activate_targeted_decision = { target = FROM decision = MON_big_raid_cancelled }
				FROM = {
					activate_targeted_decision = { target = ROOT decision = MON_big_raid_cancelled }
				}
			}
		}
	}

	#Mission for Mongolia to finish the raid in 30 days
	MON_big_raid_cancelled = {

		icon = civil_war

		allowed = { always = no } #Activated from effect

		available = {
			var:FROM.defender_state_vs_@ROOT = { has_border_war = no }
			var:FROM.attacker_state_vs_@ROOT = { has_border_war = no }
		}
		
		highlight_state_targets = {
			state = var:defender_state_temp
			state = var:FROM.defender_state_vs_@ROOT
		}

		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		timeout_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				cancel_border_war = {
					defender = var:defender_state_vs_@FROM
					attacker = var:attacker_state_vs_@FROM
				}
			}
			else = {
				cancel_border_war = {
					defender = var:FROM.defender_state_vs_@ROOT
					attacker = var:FROM.attacker_state_vs_@ROOT
				}
			}
		}
	}

	MON_request_soviet_infantry = {

		icon = generic_prepare_civil_war

		allowed = {
			tag = MON
		}

		available = {
			#has_completed_focus = MON_tackle_the_eastern_threat
			SOV = {
				exists = yes
			}
			is_in_faction_with = MON
		}

		cost = 25

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			country_event = { id = mongol_khalkin_gol.7 hours = 12 }
		}
	}

	MON_request_soviet_tanks = {

		icon = generic_military 

		allowed = {
			tag = MON
		}

		available = {
			#has_completed_focus = MON_tackle_the_eastern_threat
			SOV = {
				exists = yes
			}
			is_in_faction_with = MON
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 50
		}

		complete_effect = {
			country_event = { id = mongol_khalkin_gol.8 hours = 12 }
		}
	}

	#Khalkin Gol
	MON_khalkin_gol = {
		icon = border_war
		allowed = {
			original_tag = MON
		}

		available = {
			#has_completed_focus = MON_tackle_the_eastern_threat
			NOT = {
				has_war_with = JAP
				is_in_faction_with = JAP
			}
			849 = {
				custom_trigger_tooltip = {
					tooltip = MON_border_conflict_active
					hidden_trigger = { NOT = { has_state_flag = border_incident_active } }

				}
				any_neighbor_state = {
					OR = {
						is_controlled_by = JAP
						controller = {
							is_subject_of = JAP
						}
					}
				}
			}
		}

		visible = {
			#has_completed_focus = MON_affirm_rearmament_program
		}

		highlight_state_targets = {
			state = 849
			state = 761
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				date < 1939.4.1
				factor = 0
			}
		}
		cost = 50
		days_remove = 30
		war_with_on_remove = JAP
		complete_effect = {
			849 = {
				save_event_target_as = MON_JAP_attacker_state
				set_state_flag = border_incident_active
			}
			761 = {
				save_event_target_as = MON_JAP_defender_state
				set_state_flag = border_incident_active
			}
			761 = {
				controller = {
					country_event = { id = mongol_khalkin_gol.1 days = 1 }
				}
			}
			hidden_effect = {
				if = {
					limit = {
						is_in_faction_with = SOV
					}
					MON = {
						country_event = { id = mongol_khalkin_gol.6 days = 3 }
					}
				}
			}
		}
		remove_effect = {
			activate_targeted_decision = { target = MON decision = MON_khalkin_gol_forgotten }
			activate_targeted_decision = { target = MON decision = MON_escalate_incident_to_border_conflict_with_JAP }
		}
	}

	#Mission for defender warning that a conflict with FROM is coming
	MON_khalkin_gol_warning_DEFENDER = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			custom_effect_tooltip = escalation_possible_tooltip_for_defender
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				MON = {
					add_political_power = 120
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						uses = 2
						category = land_doctrine
						bonus = 1.0
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						uses = 2
						category = armor
						bonus = 1.0
					}
				}
			}
			hidden_effect = {
				remove_targeted_decision = { target = ROOT decision = MON_khalkin_gol_warning_DEFENDER }
				activate_targeted_decision = { target = ROOT decision = MON_border_conflict_escalation_warning_JAP }
			}
		}
	}

	#Mission for defender warning FROM can escalate to war at any point is coming
	MON_border_conflict_escalation_warning_JAP = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			custom_effect_tooltip = from_cannot_escalate
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				MON = {
					add_political_power = 120
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = land_doctrine
						bonus = 2.0
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = armor
						bonus = 2.0
					}
				}
			}
		}		
	}
	#Mission for attacker to escalate or incident is forgotten
	MON_khalkin_gol_forgotten = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_state_targets = {
			state = 849
			state = 761
		}

		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			remove_targeted_decision = { target = SOV decision = MON_escalate_incident_to_border_conflict_with_JAP }
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
			add_war_support = -0.15 #Shameful Display
			hidden_effect = {
				849 = {
					controller = {
						remove_targeted_decision = { target = ROOT decision = MON_border_conflict_escalation_warning_JAP }
					}
				}
				MON = {
					849 = {
						clr_state_flag = border_incident_active
					}
					761 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to escalate incident on border with JAP/puppet to border conflict
	MON_escalate_incident_to_border_conflict_with_JAP = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			849 = {
				OR = {
					is_fully_controlled_by = ROOT
					CONTROLLER = {
						is_subject_of = ROOT
					}
					CONTROLLER = {
						is_in_faction_with = ROOT
					}
				}
			}
			divisions_in_border_state = {
				state = 849
				border_state = 761
				size > 0
			}
		}

		highlight_state_targets = {
			state = 849
			state = 761	
		}

		ai_will_do = {
			base = 10
			modifier = { 
				has_war = no
				factor = 10
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			remove_targeted_decision = { target = ROOT decision = MON_khalkin_gol_forgotten }
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 849
					num_provinces = 3
					on_win = mongol_khalkin_gol.2
					on_lose = mongol_khalkin_gol.3
					on_cancel = mongol_khalkin_gol.4
				}
				
				defender = {
					state = 761
					num_provinces = 4
					on_win = mongol_khalkin_gol.3
					on_lose = mongol_khalkin_gol.2
					on_cancel = mongol_khalkin_gol.4
				}
			}
			MON = {
				activate_targeted_decision = { target = ROOT decision = MON_border_conflict_escalate_conflict }
				activate_targeted_decision = { target = ROOT decision = MON_border_conflict_time_until_cancelled }
			}
			761 = {
				controller = {
					activate_targeted_decision = { target = ROOT decision = MON_border_conflict_escalate_conflict }
					activate_targeted_decision = { target = ROOT decision = MON_border_conflict_time_until_cancelled }
				}
			}
		}
	}
	#Mission for attacker to win border war against FROM in X days
	MON_border_conflict_time_until_cancelled = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			849 = { has_border_war = no }
			761 = { has_border_war = no }
		}
		
		highlight_state_targets = {
			state = 849
			state = 761
		}

		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 90
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {

		}

		timeout_effect = {
			cancel_border_war = {
				defender = 849
				attacker = 761
			}
			hidden_effect = {
				remove_targeted_decision = { target = MON decision = MON_border_conflict_escalate_conflict }
				remove_targeted_decision = { target = JAP decision = MON_border_conflict_escalate_conflict }
			}
		}
	}

	#Decision to escalate conflict further
	MON_border_conflict_escalate_conflict = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_state_targets = {
			state = 849
			state = 761
		}

		cost = 50

		ai_will_do = {
			base = 0
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				set_border_war_data = {
					attacker = 849
					defender = 761
					defender_modifier = 0.15
					combat_width = 100
				}
			}
			else = {
				set_border_war_data = {
					attacker = 849
					defender = 761
					attacker_modifier = 0.25
					combat_width = 100
				}
			}
			761 = {
				controller = {
					set_country_flag = {
						flag = MON_khalkin_gol_escalate_to_war_cooldown_@ROOT
						days = 60
						value = 1
					}
					remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
				}
			}
			set_country_flag = {
				flag = MON_khalkin_gol_escalate_to_war_cooldown_@SOV
				days = 60
				value = 1
			}
			custom_effect_tooltip = in_60_days
			activate_targeted_decision = { target = ROOT decision = MON_khalkin_gol_escalate_to_war }
		}
	}

	#Decision to escalate conflict further
	MON_khalkin_gol_escalate_to_war = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			NOT = { has_country_flag = MON_khalkin_gol_escalate_to_war_cooldown_@FROM }
			has_border_war_with = FROM
		}

		highlight_state_targets = {
			state = 849
			state = 761
		}

		cost = 100

		ai_will_do = {
			base = 0
		}

		days_remove = 15

		fire_only_once = yes #Reactivation handled in effect

		war_with_target_on_remove = yes

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				849 = { save_event_target_as = their_state }
				761 = { save_event_target_as = our_state }
			}
			else = {
				761 = { save_event_target_as = our_state }
				849 = { save_event_target_as = their_state }
			}
			761 = {
				controller = {
					country_event = { id = mongol_khalkin_gol.5 }
					hidden_effect = {
						remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_to_war }
					}
				}
			}
		}

		remove_effect = {
			cancel_border_war = {
				dont_fire_events = yes
				defender = 761
				attacker = 849
			}
			declare_war_on = { target = FROM type = annex_everything }
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				849 = {
					clr_state_flag = border_incident_active
				}
				761 = {
					clr_state_flag = border_incident_active
				}
				
			}
			else = {
				FROM = {
					761 = {
						clr_state_flag = border_incident_active
					}
					849 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to back down from conflict
	MON_border_conflict_back_out_of_conflict = {

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_state_targets = {
			state = 849
			state = 761
		}

		ai_will_do = {
			base = 0
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				finalize_border_war = {
					attacker_win = yes
					attacker = 849
					defender = 761
				}
			}
			else = {
				finalize_border_war = {
					attacker = 849
					defender = 761
					defender_win = yes
				}
			}
		}
	}
}

MON_power_struggle = {
	MON_choibalsan_plot = {

		icon = GFX_decision_generic_special_project

		available = {
			hidden_trigger = { always = no }
		}

		priority = 10

		days_mission_timeout = 210

		fire_only_once = yes

		activation = {
			NOT = {
				has_idea = MON_khorloogiin_choibalsan_advisor
			}
		}

		visible = {
			NOT = {
				has_idea = MON_khorloogiin_choibalsan_advisor
			}
			NOT = {
				has_completed_focus = MON_seize_the_power
			}
			NOT = {
				has_country_flag = mon_choibalsan_revolted
			}
		}

		cancel_if_not_visible = yes

		is_good = no

		timeout_effect = {
			MON = {
				country_event = {
					id = mongol.39
					days = 2
				}
			}
		}
	}
}