PER_construct_trans_iranian_railway_category = {

	PER_build_the_railway_mission = {
	
		icon = GFX_decision_railroads
	
		allowed = {
			always = no
		}
		
		is_good = yes
		
		available = {
			custom_trigger_tooltip = {
				tooltip = PER_build_railway_tt
				always = no
			}
		}
		
		days_mission_timeout = 730
		
		timeout_effect = {
			set_country_flag = PER_railway_is_finished_flag
			hidden_effect = {
				country_event = { id = persia.railway.3 }
			}
			effect_tooltip = {
				add_stability = 0.05
				add_political_power = 75
				build_railway = {
					level = 2
					path = { 5005 7953 1922 2065 1982 10922 10837 10768 10385 7602 }
				}
				swap_ideas = {
					remove_idea = PER_disconnected_country
					add_idea = PER_disconnected_country_1
				}
			}
		}
		
	}

	PER_import_new_engines_decision  = {
	
		icon = GFX_decision_generic_merge_plant_materiel
	
		available = {
			GER = {
				has_opinion = {
					target = PER
					value > 9
				}
			}
		}
		
		cost = 10
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		complete_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
				producer = GER
			}
		}
	}
	
	PER_import_british_engines_decision  = {
	
		icon = GFX_decision_generic_merge_plant_materiel
	
		available = {
			ENG = {
				has_opinion = {
					target = PER
					value > 9
				}
			}
		}

		cost = 10
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		complete_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
				producer = ENG
			}
		}
	}
	
	PER_raise_taxes_cover_costs_decision = {

		icon = GFX_decision_eng_trade_unions_demand
	
		available = {
			has_stability > 0.3
		}

		cost = 30
		
		days_remove = 60

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			political_power_gain = -0.1
		}

		complete_effect = {
			add_stability = -0.01
			add_days_mission_timeout = {
				mission = PER_build_the_railway_mission
				days = PER_railway_mission_days_remove_var
			}
		}
		
	}
	
	PER_bring_in_new_labor_decision = {
	
		icon = GFX_decision_eng_blackshirt_march
		
		available = {
			has_stability > 0.25
		}
		
		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		days_remove = 50
		
		modifier = {
			production_speed_buildings_factor = 0.05
		}
		
		complete_effect = {
			add_manpower = -5000
			add_stability = -0.015
			add_days_mission_timeout = {
				mission = PER_build_the_railway_mission
				days = PER_railway_mission_days_remove_var
			}
		}
		
	}
	
	PER_invite_foreign_construction_assistance = { 

		icon = GFX_decision_hol_attract_foreign_investors
		
		cost = 75
		
		days_remove = 50

		ai_will_do = {
			
		}
		
		modifier = {
			industrial_factory_donations = 3
		}
		
		complete_effect = {
			add_days_mission_timeout = {
				mission = PER_build_the_railway_mission
				days = PER_railway_mission_days_remove_var
			}
		}

	}
	
}

PER_iranian_national_economy_category = {

	PER_antiquated_economy_decision_1 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_generic_research
		
		available = {
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			political_power_gain = -0.1
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			swap_ideas = {
				remove_idea = PER_antiquated_economy
				add_idea = PER_antiquated_economy_1
			}
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_antiquated_economy_decision_2 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_generic_merge_plant_materiel
		
		visible = {
			check_variable = {
				var = PER_economy_improved
				value = 1
				compare = greater_than_or_equals
			}
		}
		
		available = {
			num_of_civilian_factories_available_for_projects > 0
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			swap_ideas = {
				remove_idea = PER_antiquated_economy_1
				add_idea = PER_antiquated_economy_2
			}
			add_tech_bonus = {
				bonus = 1
				ahead_reduction = 1
				uses = 1
				category = construction_tech
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_antiquated_economy_decision_3 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_generic_factory
		
		visible = {
			check_variable = {
				var = PER_economy_improved
				value = 2
				compare = greater_than_or_equals
			}
		}
		
		available = {
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			production_speed_buildings_factor = -0.05
			production_factory_efficiency_gain_factor = -0.05
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			swap_ideas = {
				remove_idea = PER_antiquated_economy_2
				add_idea = PER_antiquated_economy_3
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_antiquated_economy_decision_4 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_eng_blackshirt_march
		
		visible = {
			check_variable = {
				var = PER_economy_improved
				value = 3
				compare = greater_than_or_equals
			}
		}
		
		available = {
			has_tech = improved_machine_tools
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			production_speed_buildings_factor = -0.05
			production_factory_efficiency_gain_factor = -0.05
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			swap_ideas = {
				remove_idea = PER_antiquated_economy_3
				add_idea = PER_antiquated_economy_4
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_antiquated_economy_decision_5 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_generic_merge_plant_ship
		
		visible = {
			check_variable = {
				var = PER_economy_improved
				value = 4
				compare = greater_than_or_equals
			}
		}
		
		available = {
			has_completed_focus = PER_industrialize_khuzestan
			has_completed_focus = PER_expand_bushehr_and_bandar_abbas
			num_of_civilian_factories_available_for_projects > 0
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			production_speed_buildings_factor = -0.05
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			swap_ideas = {
				remove_idea = PER_antiquated_economy_4
				add_idea = PER_antiquated_economy_5
			}
			add_equipment_to_stockpile = {
				type = convoy
				amount = 20
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_antiquated_economy_decision_6 = { 

		cost = PER_ant_econ_decision_cost_var
		
		days_remove = PER_ant_econ_decision_time_var
		
		icon = GFX_decision_generic_nationalism
		
		visible = {
			check_variable = {
				var = PER_economy_improved
				value = 5
				compare = greater_than_or_equals
			}
		}
		
		available = {
			NOT = {
				has_country_flag = PER_national_economy_flag
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		modifier = {
			political_power_gain = -0.2
			production_speed_buildings_factor = -0.1
		}
		
		complete_effect = {
			set_country_flag = PER_national_economy_flag
		}

		remove_effect = {
			add_to_variable = {
				var = PER_economy_improved
				value = 1
			}
			swap_ideas = {
				remove_idea = PER_antiquated_economy_5
				add_idea = PER_antiquated_economy_6
			}
			clr_country_flag = PER_national_economy_flag
		}
	}
	
	PER_industrial_subsidies_decision = { 

		cost = 25
		
		icon = GFX_decision_hol_attract_foreign_investors
		
		visible = {
			NOT = {
				has_completed_focus = PER_complete_the_industrialization
			}
		}
		
		available = {
			has_war = no
			num_of_civilian_factories < 20
		}
		
		days_remove = 70
		
		cancel_trigger = {
			num_of_civilian_factories > 19
		}

		ai_will_do = {
			base = 0
		}

		modifier = {
			production_speed_buildings_factor = 0.15
		}
		
	}
	
	PER_build_textile_factories = {
	
		cost = 25
		
		icon = GFX_decision_generic_factory
		
		available = {
			has_war = no
		}
		
		days_remove = 90
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		modifier = {
			production_speed_buildings_factor = -0.05
		}
		
		remove_effect = {
			266 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

		}
	}
	
	PER_build_jezail_factories = {
		
		icon = GFX_decision_generic_industry
		
		available = {
			has_war = no
		}
		
		days_remove = 70
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 500
				producer = PER
			}
			266 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			
		}
	}
	
	PER_expand_sugar_exports = { 

		cost = 10
		
		icon = GFX_decision_ger_mefo_bills
		
		available = {
			has_war = no
			num_of_civilian_factories < 30
		}
		
		days_remove = 70
		
		cancel_trigger = {
			num_of_civilian_factories > 29
		}

		modifier = {
			consumer_goods_factor = -0.03
		}
		
	}
	
	PER_agricultural_subsidies_decision = {

		cost = 50
		
		icon = GFX_decision_hol_attract_foreign_investors
		
		visible = {
			NOT = {
				has_idea = PER_agriculture_reform_exports
			}
		}
		
		available = {
			has_war = no
			has_completed_focus = PER_agricultural_developments
		}
		
		days_remove = 70

		ai_will_do = {
			base = 0
		}

		modifier = {
			monthly_population = 0.33
		}
		
	}
	
	PER_expand_rail_line_to_tabriz = {
	
		icon = GFX_decision_railroads
	
		available = {
			has_completed_focus = PER_road_construction
			num_of_civilian_factories_available_for_projects > 2
		}
		
		cost = 50
		
		days_remove = 100
		
		modifier = {
			civilian_factory_use = 3
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		remove_effect = {
			419 = {
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 12793
				}
				add_victory_points = {
					province = 12793
					value = 5
				}
			}
			build_railway = {
				level = 1
				path = { 10837 7969 4553 12793 }
			}
		}
	}
	
	PER_expand_rail_line_to_mashhad = {
	
		icon = GFX_decision_railroads
	
		available = {
			has_completed_focus = PER_road_construction
			num_of_civilian_factories_available_for_projects > 2
		}
		
		cost = 50
		
		days_remove = 100
		
		modifier = {
			civilian_factory_use = 3
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		remove_effect = {
			build_railway = {
				level = 1
				path = { 10837 12818 12704 12748 5073 1957 5029 }
			}
			416 = {
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 5029
				}
				add_victory_points = {
					province = 5029
					value = 3
				}
			}
		}
	}
	
	PER_expand_rail_line_to_isfahan = {
	
		icon = GFX_decision_railroads
	
		available = {
			has_completed_focus = PER_road_construction
			num_of_civilian_factories_available_for_projects > 2
		}
		
		cost = 50
		
		days_remove = 120
		
		modifier = {
			civilian_factory_use = 3
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		remove_effect = {
			build_railway = {
				level = 1
				path = { 10922 5067 8074 2026 }
			}
		}
	}
	
	PER_expand_rail_line_to_bandar_abbas = {
	
		icon = GFX_decision_railroads
	
		available = {
			has_completed_focus = PER_road_construction
			num_of_civilian_factories_available_for_projects > 2
			has_railway_connection = {
				start_state = 266
				target_state = 411
			}
		}
		
		cost = 50
		
		days_remove = 100
		
		modifier = {
			civilian_factory_use = 3
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}

		remove_effect = {
			build_railway = {
				level = 1
				path = { 8074 1963 8031 12780 12863 7982 }
			}
			remove_ideas = PER_disconnected_country_1
		}
	}
	
}

PER_iranian_low_literacy_category = {

	PER_cultivate_islamic_thought_decision = { 

		cost = 25
		
		icon = GFX_decision_generic_research
		
		visible = {
			has_completed_focus = PER_enforce_religious_schooling
		}
		
		days_remove = 50

		ai_will_do = {
			base = 0
		}

		modifier = {
			
		}
		
		remove_effect = {
			PER_literacy_change_daily_small_increase = yes
		}
	}
	
	PER_increase_education_funding_decision = { 

		cost = 50
		
		icon = GFX_decision_generic_research
		
		visible = {
			has_completed_focus = PER_secularize_the_madrasahs

		}
		
		available = {
			
		}
		
		cancel_trigger = {
			has_completed_focus = PER_enforce_religious_schooling
		}
		
		days_remove = 70
		
		ai_will_do = {
			base = 0
		}

		modifier = {
			
		}
		
		remove_effect = {
			PER_literacy_change_daily_small_increase = yes
		}

	}
	
	PER_establish_national_library_decision = {

		cost = 25
		
		icon = GFX_decision_SOV_place_hq
		
		available = {
			has_completed_focus = PER_harness_the_madrasahs
			custom_trigger_tooltip = {
				tooltip = PER_dar_ul_funun_trigger_tt
				check_variable = {
					var = PER_low_literacy_debuff_var
					value = -0.15
					compare = greater_than_or_equals
				}
			}
		}
		
		days_remove = 70
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		highlight_states = {
			highlight_state_targets = {
				state = 266
			}
		} 
		
		modifier = {
			political_power_gain = -0.1
		}
		
		remove_effect = {
			add_research_slot = 1
			PER_literacy_change_daily_small_increase = yes
		}
	}
	
	PER_build_madrasah_266 = { 

		cost = PER_madrasah_cost_var
		
		days_remove = PER_madrasah_days_var
		
		icon = GFX_decision_SOV_academy_of_sciences
		
		state_target = yes
		targets = { 
			266
			410
			411
			412
			413
			414
			416
			417
			418
			419
			420
			421
			912
			913
			914
			915
			916
			918
			919
			920
		}
		on_map_mode = map_only
		
		visible = {
			has_completed_focus = PER_harness_the_madrasahs
		}
		
		available = {
			NOT = {
				has_country_flag = PER_is_expanding_madrasah_tt
			}
		}
		
		fire_only_once = yes

		ai_will_do = {
			base = 0
		}
		
		complete_effect = {
			set_country_flag = PER_is_expanding_madrasah_tt
		}
		
		remove_effect = {
			PER_literacy_change_daily_small_increase = yes
			hidden_effect = {
				clr_country_flag = PER_is_expanding_madrasah_tt
			}
		}
	}
	
}

PER_iranian_resource_prospecting_category = {

	PER_expand_the_abadan_oil_field = {
		
		icon = GFX_decision_oil

		highlight_states = {
			highlight_state_targets = {
				state = 413
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 5
			OR = {
				has_full_control_of_state = 413
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 413
				}				
			}
			has_tech = excavation3
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 413
				}
			}
			has_completed_focus = PER_oil_focus
		}
		
		cost = PER_oil_decision_cost_var
		
		days_remove = PER_oil_decision_days_var
		
		fire_only_once = yes

		modifier = {
			civilian_factory_use = 6
		}

		remove_effect = {
			413 = {
				add_resource = {
					type = oil
					amount = 24
				}
			}

		}
	}
	
	PER_expand_the_aghajari_fields = {
		
		icon = GFX_decision_oil

		highlight_states = {
			highlight_state_targets = {
				state = 413
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			OR = {
				has_full_control_of_state = 413
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 413
				}				
			}
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 413
				}
			}
			has_completed_focus = PER_oil_focus
		}
		
		cost = PER_oil_decision_cost_var
		
		days_remove = 70

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			413 = {
				add_resource = {
					type = oil
					amount = 5
				}
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_413_oil 
						value = 2 
						compare = not_equals 
					}
					check_variable = { 
						var = PER_413_oil 
						value = 5 
						compare = not_equals 
					}
					check_variable = { 
						var = PER_413_oil 
						value = 9 
						compare = less_than 
					}
				}
				custom_effect_tooltip = PER_413_oil_decision_tt
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_413_oil 
						value = 2
						compare = equals 
					}
				}
				413 = {
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_413_oil 
						value = 5 
						compare = equals 
					}
				}
				413 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_413_oil 
						value = 9 
						compare = equals 
					}
				}
				413 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						check_variable = { 
							var = PER_413_oil 
							value = 1 
							compare = greater_than_or_equals 
						} 
					}
				}
				set_variable = { var = PER_413_oil value = 0 }
			}
			add_to_variable = { var = PER_413_oil value = 1 }
		}
	}
	
	PER_expand_the_bushehr_oil_fields = { ## NOT SEMNAN, ACTUALLY KERMAN
		
		icon = GFX_decision_oil

		highlight_states = {
			highlight_state_targets = {
				state = 913
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			OR = {
				has_full_control_of_state = 913
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 913
				}				
			}
			has_tech = excavation2
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 913
				}
			}
			has_completed_focus = PER_oil_focus
		}

		cost = PER_oil_decision_cost_var
		
		days_remove = PER_oil_decision_days_var

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			913 = {
				add_resource = {
					type = oil
					amount = 6
				}
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_412_oil
						value = 4 
						compare = less_than 
					}
				}
				custom_effect_tooltip = PER_412_oil_decision_tt
			}
			if = {
				limit = {
					check_variable = { 
						var = PER_412_oil
						value = 4 
						compare = equals 
					}
				}
				913 = {
					add_extra_state_shared_building_slots = 1
				}
				add_political_power = 75
			}
			if = {
				limit = {
					NOT = { 
						check_variable = { 
							var = PER_412_oil 
							value = 1 
							compare = greater_than_or_equals 
						} 
					}
				}
				set_variable = { 
					var = PER_412_oil
					value = 0 
				}
			}
			add_to_variable = { 
				var = PER_412_oil 
				value = 1 
			}
		}
	}
	
	PER_develop_semnan_iron_ore_mines = { ## NOT SEMNAN, ACTUALLY KERMAN
		
		icon = GFX_decision_steel

		highlight_states = {
			highlight_state_targets = {
				state = 414
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 4
			OR = {
				has_full_control_of_state = 414
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 414
				}				
			}
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 414
				}
			}
			has_completed_focus = PER_subsidize_mining_industries
		}

		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		days_remove = PER_resource_extraction_days_var

		modifier = {
			civilian_factory_use = 5
		}

		remove_effect = {
			add_manpower = -5000
			414 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}
	}
	
	PER_develop_isfahans_resource_deposits = { #411
		
		icon = GFX_decision_generic_construction

		highlight_states = {
			highlight_state_targets = {
				state = 411
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 3
			OR = {
				has_full_control_of_state = 411
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 411
				}				
			}
			has_tech = excavation2
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 411
				}
			}
			has_completed_focus = PER_subsidize_mining_industries
		}

		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		days_remove = PER_resource_extraction_days_var

		modifier = {
			civilian_factory_use = 4
		}

		remove_effect = {
			add_manpower = -5000
			411 = {
				add_resource = {
					type = steel
					amount = 3
				}
				add_resource = {
					type = chromium
					amount = 1
				}
				add_resource = {
					type = tungsten
					amount = 2
				}
			}
		}
	}
	
	PER_develop_isfahans_resource_deposits_2 = { #411
		
		icon = GFX_decision_tungsten

		highlight_states = {
			highlight_state_targets = {
				state = 411
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			OR = {
				has_full_control_of_state = 411
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 411
				}				
			}
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 411
				}
			}
			has_completed_focus = PER_subsidize_mining_industries
		}

		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		fire_only_once = yes
		
		days_remove = PER_resource_extraction_days_var

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			add_manpower = -5000
			411 = {
				add_resource = {
					type = tungsten
					amount = 5
				}
			}
		}
	}
	
	PER_develop_hamadan_iron_ore_mines = { #417
		
		icon = GFX_decision_steel

		highlight_states = {
			highlight_state_targets = {
				state = 417
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			OR = {
				has_full_control_of_state = 417
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 417
				}				
			}
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 417
				}
			}
			has_completed_focus = PER_subsidize_mining_industries
		}

		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		days_remove = PER_resource_extraction_days_var

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			add_manpower = -5000
			417 = {
				add_resource = {
					type = steel
					amount = 5
				}
			}
		}
	}
	
	PER_develop_semnan_iron_ore_mines_2 = { #418
		
		icon = GFX_decision_steel

		highlight_states = {
			highlight_state_targets = {
				state = 418
			} 
		}

		available = {
			num_of_civilian_factories_available_for_projects > 4
			OR = {
				has_full_control_of_state = 418
				any_country = {
					is_puppet_of = ROOT
					has_full_control_of_state = 418
				}				
			}
			has_tech = excavation1
		}

		visible = {
			NOT = {
				any_other_country = {
					has_full_control_of_state = 418
				}
			}
			has_completed_focus = PER_subsidize_mining_industries
		}
		
		fire_only_once = yes

		custom_cost_trigger = {
			has_manpower > 5000
		}
		custom_cost_text = PER_decision_cost_manpower_5000
		
		days_remove = PER_resource_extraction_days_var

		modifier = {
			civilian_factory_use = 5
		}

		remove_effect = {
			add_manpower = -5000
			418 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}
	}
	
}

PER_iranian_army_category = {

	#### ARMY DECISIONS ####
	
	PER_subsidize_zbrojovka_brno = {

		cost = 75
		
		icon = GFX_decision_generic_prepare_civil_war
		
		visible = {
			has_country_flag = PER_zbrojovka_brno_contract
		}
		
		available = {
			has_completed_focus = PER_rifles_modernization_focus
			has_war = no
			CZE = {
				has_opinion = {
					target = PER
					value > 29
				}
			}
		}
		
		days_remove = 90
		fire_only_once = yes
		
		remove_effect = {
			set_country_flag = PER_zbrojovka_brno_invited
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_local_zbrojovka_brno
			add_offsite_building = { 
				type = arms_factory
				level = 1 
			}
		}
	}

	#### AIR DECISIONS ####

	PER_further_air_training_decision = {

		custom_cost_trigger = {
			has_air_experience > 49.9
		}
		custom_cost_text = PER_decision_cost_air_XP_50
		
		icon = GFX_decision_hol_draw_up_staff_plans
		
		available = {
			has_completed_focus = PER_iiaf_technical_officers_academy
		}
		
		days_remove = 90
		fire_only_once = yes
		
		complete_effect = {
			air_experience = -50
		}
		
		remove_effect = {
			custom_effect_tooltip = PER_pilot_training_focus_tt
			add_to_variable = {
				var = PER_outdated_af_training_xp_factor_var
				value = 0.1
			}
			add_to_variable = {
				var = PER_outdated_af_experience_gain_var
				value = 0.05
			}
		}
	}
	
	PER_build_more_airbases_decision = { 

		custom_cost_trigger = {
			has_air_experience > 49.9
		}
		custom_cost_text = PER_decision_cost_air_XP_50
		
		icon = GFX_decision_generic_construction
		
		available = {
			has_tech = construction3
			has_completed_focus = PER_construct_mehrabad_air_base
			num_of_civilian_factories_available_for_projects > 2
		}
		
		days_remove = 180
		fire_only_once = yes
		
		modifier = {
			production_speed_buildings_factor = -0.1
			civilian_factory_use = 3
		}
		
		complete_effect = {
			air_experience = -50
		}
		
		remove_effect = {
			custom_effect_tooltip = PER_mehrabad_airport_focus_tt
			add_to_variable = {
				var = PER_outdated_af_air_range_factor_var
				value = 0.25
			}
			411 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			413 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			416 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			419 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	#### NAVY DECISIONS ####
	
	PER_persian_gulf_exercises_decision = {

		cost = 30
		
		icon = GFX_decision_generic_naval

		available = {
			has_completed_focus = PER_persian_gulf_exercises
			has_war = no
			controls_state = 413
			controls_state = 912
			controls_state = 913
			
		}
		
		days_remove = 60
		
		modifier = {
			experience_gain_navy_factor = 0.05
		}
		
		remove_effect = {
			navy_experience = 10
			if = {
				limit = {
					any_navy_leader = {
						NOT = {
							has_trait = green_water_expert
						}
					}
				}
				custom_effect_tooltip = PER_persian_gulf_exercises_effect_tt
				hidden_effect = {
					random_navy_leader = {
						if = {
							limit = {
								NOT = {
									has_trait = green_water_expert
								}
							}
							add_unit_leader_trait = green_water_expert
						}
						
					}
				}
				
			}
			if = {
				limit = {
					check_variable = {
						var = PER_outdated_navy_naval_doctrine_cost_var
						value = 0
						compare = not_equals
					}
				}
				custom_effect_tooltip = PER_iin_navy_doctrine_cost_down_2
				add_to_variable = {
					var = PER_outdated_navy_naval_doctrine_cost_var
					value = -0.01
				}
			}
		}
		
	}
	
	PER_resolve_naval_logistics_decision = {

		cost = 30
		
		icon = GFX_decision_generic_naval

		available = {
			has_completed_focus = PER_expand_shahid_rajaei_port
			has_completed_focus = PER_oil_focus
			custom_trigger_tooltip = {
				tooltip = PER_naval_logistics_trigger_tt
				check_variable = {
					var = resource@oil
					value = 30
					compare = greater_than_or_equals
				}
			}
		}
		
		days_remove = 90
		
		modifier = {
			base_fuel_gain_factor = -0.5
			country_resource_oil = -30
		}
		
		remove_effect = {
			custom_effect_tooltip = PER_iin_speed_up_10_tt
			add_to_variable = {
				var = PER_outdated_navy_naval_speed_factor_var
				value = 0.1
			}
			413 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = fuel_silo
					level = 2
				}
			}
		}
		
	}
	
	PER_foreign_ship_designs_decision = {
		
		icon = GFX_decision_generic_naval
		
		visible = {
			OR = {
				has_country_flag = PER_naval_agreement_UK
				has_country_flag = PER_naval_agreement_germany
				has_country_flag = PER_naval_agreement_USSR
				has_country_flag = PER_naval_agreement_US
			}
			
		}
		
		available = {
			custom_trigger_tooltip = {
				tooltip = PER_foreign_ship_designs_decision_trg_tt
				OR = {
					has_country_flag = PER_naval_agreement_UK
					has_country_flag = PER_naval_agreement_germany
					has_country_flag = PER_naval_agreement_USSR
					has_country_flag = PER_naval_agreement_US
				}
			}
			num_of_civilian_factories_available_for_projects > 2
		}
		
		custom_cost_trigger = {
			has_navy_experience > 49.9
		}
		custom_cost_text = PER_decision_cost_navy_XP_50
		
		fire_only_once = yes
		
		days_remove = 210
		
		modifier = {
			civilian_factory_use = 3
		}
		
		complete_effect = {
			navy_experience = -50
		}
		
		remove_effect = {
			set_country_flag = PER_ready_to_buy_ships_flag
			unlock_decision_tooltip = PER_purchase_foreign_submarines
			unlock_decision_tooltip = PER_purchase_foreign_destroyers
			unlock_decision_tooltip = PER_purchase_foreign_light_cruisers
			unlock_decision_tooltip = PER_purchase_foreign_heavy_cruisers
			hidden_effect = {
				country_event = { id = persia.navy.3 }
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_UK
				}
				effect_tooltip = {
					custom_effect_tooltip = PER_naval_designs_from_UK_tt
					set_technology = {
						basic_battery = 1
						sonar = 1
						basic_depth_charges = 1
					}
					add_tech_bonus = {
						name = PER_ship_design_bureau_focus
						bonus = 0.5
						uses = 2
						category = asw_tech
					}
				}
				
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_germany
				}
				effect_tooltip = {
					custom_effect_tooltip = PER_naval_designs_from_germany_tt
					set_technology = {
						early_ship_hull_submarine = 1
						panzerschiffe = 1
						basic_secondary_battery = 1
						basic_torpedo = 1
					}
				}
				
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_USSR
				}
				if = {
					limit = {
						SOV = {
							has_government = communism
						}
					}
					custom_effect_tooltip = PER_naval_designs_from_USSR_tt
				}
				else = {
					custom_effect_tooltip = PER_naval_designs_from_russia_tt
				}
				effect_tooltip = {
					set_technology = {
						basic_battery = 1
						basic_light_battery = 1
						basic_torpedo = 1
					}
				}
				
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_US
				}
				custom_effect_tooltip = PER_naval_designs_from_USA_tt
				effect_tooltip = {
					set_technology = {
						basic_battery = 1
						mtg_transport = 1
						antiair2 = 1
						basic_medium_battery = 1
					}
					add_tech_bonus = {
						name = PER_ship_design_bureau_focus
						bonus = 0.3
						uses = 2
						technology = fire_control_methods_1
						technology = fire_control_methods_2
					}
				}
			}
		
		}
		
	}
	
	PER_purchase_foreign_submarines = {

		cost = 100
		
		icon = GFX_decision_generic_naval
		
		visible = {
			has_country_flag = PER_ready_to_buy_ships_flag
		}

		available = {
			OR = {
				has_country_flag = PER_naval_agreement_germany
				has_country_flag = PER_naval_agreement_USSR
				has_country_flag = PER_naval_agreement_US
			}
			has_navy_size = {
				size > 3
			}
			NOT = {
				has_country_flag = PER_naval_purchase_ongoing
			}
			has_war = no
		}
		
		cancel_trigger = {
			has_war = yes
		}
		
		cancel_effect = {
			country_event = { id = persia.navy.4 }
		}
		
		days_remove = 100
		
		modifier = {
			consumer_goods_factor = 0.05
		}
		
		complete_effect = {
			set_country_flag = PER_naval_purchase_ongoing
		}
		
		remove_effect = {
			clr_country_flag = PER_naval_purchase_ongoing
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_germany
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Type IX Class"
					creator = GER
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Type IX Class"
					creator = GER
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Type IX Class"
					creator = GER
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Type IX Class"
					creator = GER
				}
				
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_US
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Barracuda Class"
					creator = USA
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Barracuda Class"
					creator = USA
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Barracuda Class"
					creator = USA
				}
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_USSR
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Series IX Srednyaya"
					creator = SOV
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Series IX Srednyaya"
					creator = SOV
				}
				create_ship = {
					type = ship_hull_submarine_1
					equipment_variant = "Series IX Srednyaya"
					creator = SOV
				}
			}
		}
		
	}
	
	PER_purchase_foreign_destroyers = {

		cost = 100
		
		icon = GFX_decision_generic_naval
		
		visible = {
			has_country_flag = PER_ready_to_buy_ships_flag
		}

		available = {
			OR = {
				has_country_flag = PER_naval_agreement_UK
				has_country_flag = PER_naval_agreement_germany
				has_country_flag = PER_naval_agreement_USSR
				has_country_flag = PER_naval_agreement_US
			}
			has_navy_size = {
				size > 5
			}
			NOT = {
				has_country_flag = PER_naval_purchase_ongoing
			}
			num_of_naval_factories > 2
			has_war = no
		}
		
		cancel_trigger = {
			has_war = yes
		}
		
		cancel_effect = {
			country_event = { id = persia.navy.4 }
		}
		
		days_remove = 100
		
		modifier = {
			consumer_goods_factor = 0.05
		}
		
		complete_effect = {
			set_country_flag = PER_naval_purchase_ongoing
		}
		
		remove_effect = {
			clr_country_flag = PER_naval_purchase_ongoing
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_UK
				}
				create_ship = {
					type = ship_hull_light_2
					equipment_variant = "E/F/G/H/I Class"
					creator = ENG
				}
				create_ship = {
					type = ship_hull_light_2
					equipment_variant = "E/F/G/H/I Class"
					creator = ENG
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "V/W Class"
					creator = ENG
				}
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_germany
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Type 24 Class"
					creator = GER
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Type 24 Class"
					creator = GER
				}
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_US
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Clemson Class"
					creator = USA
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Clemson Class"
					creator = USA
				}
				create_ship = {
					type = ship_hull_light_2
					equipment_variant = "Farragut Class"
					creator = USA
				}
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_USSR
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Orfey Class"
					creator = SOV
				}
				create_ship = {
					type = ship_hull_light_2
					equipment_variant = "Leningrad & Minsk Class"
					creator = SOV
				}
			}
		}
		
	}
	
	PER_purchase_foreign_light_cruisers = {

		cost = 100
		
		icon = GFX_decision_generic_naval
		
		visible = {
			has_country_flag = PER_ready_to_buy_ships_flag
		}

		available = {
			OR = {
				has_country_flag = PER_naval_agreement_UK
				has_country_flag = PER_naval_agreement_germany
				has_country_flag = PER_naval_agreement_USSR
				has_country_flag = PER_naval_agreement_US
			}
			has_navy_size = {
				size > 7
			}
			NOT = {
				has_country_flag = PER_naval_purchase_ongoing
			}
			num_of_naval_factories > 4
			has_war = no
		}
		
		cancel_trigger = {
			has_war = yes
		}
		
		cancel_effect = {
			country_event = { id = persia.navy.4 }
		}
		
		days_remove = 100
		
		modifier = {
			consumer_goods_factor = 0.075
		}
		
		complete_effect = {
			set_country_flag = PER_naval_purchase_ongoing
		}
		
		remove_effect = {
			clr_country_flag = PER_naval_purchase_ongoing
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_UK
				}
				create_ship = {
					type = ship_hull_cruiser_2
					equipment_variant = "Leander Class"
					creator = ENG
				}

			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_germany
				}
				create_ship = {
					type = ship_hull_cruiser_2
					equipment_variant = "Leipzig Class"
					creator = GER
				}

			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_US
				}
				create_ship = {
					type = ship_hull_cruiser_2
					equipment_variant = "Brooklyn Class"
					creator = USA
				}
				
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_USSR
				}
				create_ship = {
					type = ship_hull_cruiser_1
					equipment_variant = "Krasni Kavkaz Class"
					creator = SOV
				}
			}
		}
		
	}
	
	PER_purchase_foreign_heavy_cruisers = {

		cost = 150
		
		icon = GFX_decision_generic_naval
		
		visible = {
			has_country_flag = PER_ready_to_buy_ships_flag
		}

		available = {
			OR = {
				has_country_flag = PER_naval_agreement_UK
				has_country_flag = PER_naval_agreement_germany
			}
			has_navy_size = {
				size > 11
			}
			NOT = {
				has_country_flag = PER_naval_purchase_ongoing
			}
			num_of_naval_factories > 8
			has_war = no
		}
		
		cancel_trigger = {
			has_war = yes
		}
		
		cancel_effect = {
			country_event = { id = persia.navy.4 }
		}
		
		days_remove = 150
		
		modifier = {
			consumer_goods_factor = 0.1
		}
		
		complete_effect = {
			set_country_flag = PER_naval_purchase_ongoing
		}
		
		remove_effect = {
			clr_country_flag = PER_naval_purchase_ongoing
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_UK
				}
				create_ship = {
					type = ship_hull_cruiser_2
					equipment_variant = "County Class"
					creator = ENG
				}
			}
			if = {
				limit = {
					has_country_flag = PER_naval_agreement_germany
				}
				create_ship = {
					type = ship_hull_cruiser_2
					equipment_variant = "Admiral Hipper Class"
					creator = GER
				}
			}

		}
		
	}

	
	
}