YUG_yugoslav_reunification_category = {
	r56_unite_puppet_with_yug = {
	
		icon = generic_form_nation
	
		cost = 25

		ai_will_do = {
			factor = 0 
		}

		#days_remove = 1

        fire_only_once = yes
		
		priority = 1
		
		allowed = {
			always = yes
		}
		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
				OR = {
					original_tag = SER
					original_tag = CRO
					original_tag = BOS
					original_tag = HRZ
					original_tag = MNT
					original_tag = KOS
					original_tag = MAC
					original_tag = SLV
				}
			}
		}
		available = {
			YUG = {
				exists = yes
				is_puppet_of = ROOT
			}
			FROM = {

			}			
		}
		
		visible = {
			NOT = {
				tag = YUG
			}
			if = {
				limit = {
					original_tag = CRO
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_united_autonomous_croatia
							has_completed_focus = YUG_devolved_croatia
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = CRO
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_united_autonomous_croatia
							has_completed_focus = YUG_devolved_croatia
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						original_tag = BOS
						original_tag = HRZ
					}
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_safeguard_bosnia
							has_completed_focus = YUG_divide_bosnia
						}
					}
				}
			}	
			if = {
				limit = {
					OR = {
						original_tag = MAC
						original_tag = KOS
						original_tag = MNT

					}
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_safeguard_bosnia
							has_completed_focus = YUG_divide_bosnia
						}
					}
				}
			}												
		}
		
		complete_effect = {
			YUG = {
				annex_country = {
					target = FROM
					transfer_troops = yes		
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = large_increase
				}				
			}
		}		
	}
}
r56_YUG_internal_political_tensions = {
	
}
r56_YUG_new_economic_policy_decisions = {
	r56_YUG_public_work_programs = {

		icon = generic_shovels

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.15
				check_variable = { YUG_PW_program_cost > 40 } #Less likely to do it when it costs this much
			}
			modifier = {
				factor = 0.1
				check_variable = { YUG_PW_program_cost > 60 } #Even less likely to do it when it costs this much
			}
			modifier = {
				factor = 0
				check_variable = { YUG_PW_program_cost > 70 } #Shouldn't even considered to do it when it costs this much
			}
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
			has_country_leader = {
				character = YUG_milan_stojadinovic
				ruling_only = yes
			}
		}

		visible = {
			has_country_leader = {
				character = YUG_milan_stojadinovic
				ruling_only = yes
			}
		}

		days_remove = 60 

		cost = YUG_PW_program_cost

		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_dynamic_modifier = {
					modifier = r56_YUG_PW_project
					days = 60
				}
				set_state_flag = YUG_PW_project_state
			}
		}

		modifier = {
			production_speed_buildings_factor = 0.01
			consumer_goods_factor = -0.05
		}

		remove_effect = {
			if = {
				limit = {
					any_controlled_state = {
						has_state_flag = YUG_PW_project_state
					}
				}
				random_list = {
					90 = {
						# Nothing happens
					}
					10 = {
						if = {
							limit = {
								any_controlled_state = {
									NOT = {
										has_state_flag = YUG_PW_project_state
									}
								}
							}
						}
						random_owned_controlled_state = {
							limit = {
								is_core_of = ROOT
								has_state_flag = YUG_PW_project_state
								free_building_slots = {
									building = arms_factory
									size > 1
									include_locked = yes
								}
							}
							add_extra_state_shared_building_slots = 1
							clr_state_flag = YUG_PW_project_state
						}
					}
				}
			}
			add_to_variable = {
				var = YUG_PW_program_cost
				value = 5
			}
		}
	}	
	r56_YUG_liquidate_farmers_debts = {

		icon = generic_fundraising

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
		}

		visible = {

		}

		days_remove = 90

		cost = 75

		modifier = {
			consumer_goods_factor = 0.15
		}

		complete_effect = {
			add_to_variable = {
				var = r56_YUG_democratic_loyalty
				value = 1
			}
			add_to_variable = {
				var = r56_YUG_democratic_effect
				value = 0.1
			}
			custom_effect_tooltip = r56_YUG_HSS_loyalty_effect
			custom_effect_tooltip = r56_YUG_IT_good_HSS
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
	r56_YUG_price_regulation_schemes = {

		icon = gre_paying_ifc_debt

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
		}

		visible = {

		}

		days_remove = 120

		cost = 50

		modifier = {
			consumer_goods_factor = 0.15
			political_power_factor = -0.1
		}

		complete_effect = {
			#
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
	r56_YUG_paying_off_our_debts = {

		icon = hol_attract_foreign_investors

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			NOT = {
				has_war_with = FRA
			}
		}

		visible = {
			NOT = {
				has_war_with = FRA
			}
		}

		days_remove = 60

		cost = 35

		modifier = {
			consumer_goods_factor = 0.05
			political_power_factor = -0.05
		}

		targeted_modifier = {
			tag = FRA
			cic_to_target_factor = 0.1
		}

		complete_effect = {
			#
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
}

r56_YUG_sabotage_enemy_infra = {

	r56_YUG_sabotage_enemy_factories = {

		icon = generic_wreckers

        state_target = yes

		available = {
			has_manpower > 250
			has_equipment = {
                infantry_equipment > 249
            }
        }

		target_trigger = {
			FROM = {
				YUG_yugoslav_core_state = yes
				OR = {
					industrial_complex > 0
					arms_factory > 0
				}
				controller = {
					has_war_with = YUG
					NOT = {
						tag = YUG
					}
				}
			}
		}

        fire_only_once = yes

        custom_cost_text = r56_15_command_power_cost

        custom_cost_trigger = {
            command_power > 15
        }        

        complete_effect = {
			add_manpower = -250
			add_command_power = -15
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = -250
                producer = YUG
            }                 
        }

		highlight_states = {
			highlight_states_trigger = {
				
			}
		}

        days_remove = 60

        on_map_mode = map_only

        remove_effect = {
			FROM = { 
				add_resistance = 5
				if = {
					limit = {
						arms_factory > 0
					}
					damage_building = {
						type = arms_factory
						damage = 0.8
					}
					random_list = {
						75 = {
							#
						}
						25 = {
							YUG = {
								add_offsite_building = { type = arms_factory level = 1 }
							}
						}
					}
				}
				else_if = {
					limit = {
						industrial_complex > 0 
					}
					damage_building = {
						type = industrial_complex
						damage = 0.8
					}
					random_list = {
						75 = {
							#
						}
						25 = {
							YUG = {
								add_offsite_building = { type = industrial_complex level = 1 }
							}
						}
					}
				}
            }
        }

		ai_will_do = {
			base = 3
        } 
	}
}