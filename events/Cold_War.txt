add_namespace = cold_war

# Hungary first election, mostly democratic
country_event = {
    id = cold_war.1
    picture = GFX_report_event_generic_conference
	title = cold_war.1.t
	desc = cold_war.1.d
    fire_only_once = yes

    is_triggered_only = yes

    option = {  
        name = cold_war.1.a
    }
}

# Alwaziri coup - part 1
country_event = {
    id = cold_war.2
    picture = GFX_report_event_generic_conference
	title = cold_war.2.t
	desc = cold_war.2.d
    fire_only_once = yes

    trigger = {
		original_tag = YEM
        date > 1948.02.17
        has_government = neutrality
	}

    option = {  
        name = cold_war.2.a
        retire_character = YEM_imam_yahya
        add_country_leader_role = {
            character = YEM_abdullah_bin_ahmed_al_wazir
            promote_leader = yes
            country_leader = {
                ideology = conservatism_n
                expire = "1965.1.1.1"
                traits = { war_industrialist }
            }
        }
    }
}

# Alwaziri coup - part 2
country_event = {
    id = cold_war.3
    picture = GFX_report_event_generic_conference
	title = cold_war.3.t
	desc = cold_war.3.d
    fire_only_once = yes

    trigger = {
		original_tag = YEM
        date > 1948.02.17
        has_government = neutrality
        has_country_leader = {
            character = YEM_abdullah_bin_ahmed_al_wazir
            ruling_only = yes
        }
	}

    option = {  
        name = cold_war.3.a
        retire_country_leader = yes
        promote_character = YEM_ahmad_bin_yahya
    }
}

#Marshall Plan - European countries (not puppets or Finland, their overlords instead)
country_event = {
    id = cold_war.4
    picture = GFX_report_event_generic_conference
	title = cold_war.4.t
	desc = cold_war.4.d
    fire_only_once = yes

    is_triggered_only = yes

    option = {  #accept Marshall aid
        name = cold_war.4.a
        every_subject_country = {
            limit = {
                capital_scope = {
                    is_on_continent = europe
                }
            }
            add_autonomy_score = {
                value = 200
                #localization = EXAMPLE
            }
            add_timed_idea = {
                idea = USA_marshall_plan_aid_idea
                days = 1440
            }
        }
        add_timed_idea = {
            idea = USA_marshall_plan_aid_idea
            days = 1440
        }
        if = {
            limit = {
                ROOT = {
                    original_tag = SOV
                }
            }
            FIN = {
                add_timed_idea = {
                    idea = USA_marshall_plan_aid_idea
                    days = 1440
                }
            }
        }
    }
    option = {  #reject Marshall aid
        name = cold_war.4.b
        every_subject_country = {
            limit = {
                capital_scope = {
                    is_on_continent = europe
                }
            }
            add_popularity = {
                ideology = var:current_party_ideology_group
                popularity = -0.1
            }
        }
    }
}

# Czech coup - triggered pre-event
country_event = {
    id = cold_war.5
    picture = GFX_report_event_generic_conference
	title = cold_war.5.t
	desc = cold_war.5.d
    fire_only_once = yes

    trigger = {     #lowering communist support in a democratic government
		original_tag = CZE
        date > 1948.02.01
        has_government = democratic
        communism < 0.35
	}

    option = {  
        name = cold_war.5.a
        set_country_flag = CZE_commies_influence_police_hire_ministers_resign
    }
}

# Czech coup - focus event
country_event = {
    id = cold_war.6
    picture = GFX_report_event_generic_conference
	title = cold_war.6.t
	desc = cold_war.6.d
    fire_only_once = yes

    is_triggered_only = yes

    option = {  #We are too late...
        name = cold_war.6.a
        set_politics = {
            ruling_party = communism
            elections_allowed = no
        }
        set_cosmetic_tag = CZE_democratic   #same name until 1960
        add_ideas = edvard_benes
    }
    # option = {  #Resist! - WIP - some sort of civil war - but how much force do they have?
    #     name = cold_war.6.b
    # }
}

country_event = {
    id = cold_war.7
    picture = GFX_report_event_generic_conference
	title = cold_war.7.t
	desc = cold_war.7.d
    fire_only_once = yes

    trigger = {
		original_tag = ENG
        date > 1946.06.01
        MPL = {
            is_subject_of = ENG
            has_government = neutrality
        }
	}

    option = {
        name = cold_war.7.a
        MPL = {
            set_country_flag = MPL_violence_escalation
        }
    }
}

country_event = {
    id = cold_war.8
    picture = GFX_report_event_generic_conference
	title = cold_war.8.t
	desc = cold_war.8.d
    fire_only_once = yes

    trigger = {
		original_tag = FRA
        NOT = {
            country_exists = SYR
        }
        any_owned_state = {
            is_core_of = SYR
        }
	}

    option = {
        name = cold_war.8.a
        every_owned_state = {
            limit = {
                is_core_of = SYR
            }
            add_compliance = -30
            add_dynamic_modifier = {
				modifier = rival_government
			}
        }
    }
}

country_event = {   #china ultimatum to France
    id = cold_war.9
    picture = GFX_report_event_generic_conference
	title = cold_war.9.t
	desc = cold_war.9.d
    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = cold_war.9.a
        FRI = {
            transfer_state = 670
            transfer_state = 671
            transfer_state = 924
            transfer_state = 928
        }
        CHI = {
            transfer_state = 728
        }
        hidden_effect = {
            country_event = cold_war.10
        }
    }

    option = {
        ai_chance = { factor = 0 }
        name = cold_war.9.b
        create_wargoal = {
            type = take_state_focus
            target = CHI
            generator = { 670 671 924 928 }
            expire = 700
        }
    }
}

country_event = {   #Laos uprising
    id = cold_war.10
    picture = GFX_report_event_generic_conference
	title = cold_war.10.t
	desc = cold_war.10.d
    fire_only_once = yes
    is_triggered_only = yes

    immediate = {
        hidden_effect = {
            FRI = {
                release = LAO
            }
            LAO = {
                set_politics = {
                    ruling_party = fascism
                    elections_allowed = no
                }
                set_cosmetic_tag = LAO_democratic
                declare_war_on = {
                    target = FRI
                    type = civil_war
                }
            }
        }
    }

    option = {
        name = cold_war.10.a
    }
}

# Argentina changes leader
country_event = {
    id = cold_war.11
    picture = GFX_report_event_generic_conference
	title = cold_war.11.t
	desc = cold_war.11.d
    fire_only_once = yes

    trigger = {
		original_tag = ARG
        date > 1946.05.17
        has_government = neutrality
        OR = {
            ARG_juan_domingo_peron = {
                is_political_advisor = yes
            }
            has_start_date > 1945.01.01
        }
	}

    option = {  
        name = cold_war.11.a
        retire_country_leader = yes
        if = {
            limit = {
                ARG_juan_domingo_peron = {
                    can_be_country_leader = no
                }
            }
            add_country_leader_role = {
                character = ARG_juan_domingo_peron
                promote_leader = no
                country_leader = {
                    ideology = military_junta
                    expire = "1974.1.1.1"
                    traits = {
        
                    }
                }
            }
        }
    }
    option = {  
        name = cold_war.11.b
        retire_character = ARG_juan_domingo_peron
        add_stability = -0.1
    }
}

# Greece hidden leader change
country_event = {
    id = cold_war.12
    picture = GFX_report_event_generic_conference
	title = cold_war.12.t
	desc = cold_war.12.d
    fire_only_once = yes

    is_triggered_only = yes

    hidden = yes

    option = {  
        name = cold_war.12.a
        add_country_leader_role = { #skip over 2 leaders of just 2 and 3 weeks respectively
            Character = GRE_themistoklis_sofoulis
            Promote_leader = yes
            Country_leader = {
                ideology = centrism_democratic
                expire = 1954.2.1.1
                traits = {
                    
                }
            }
        }
    }
}

# Greek civil war starts as guerrila warfare after election
country_event = {
    id = cold_war.13
    picture = GFX_report_event_generic_conference
	title = cold_war.13.t
	desc = cold_war.13.d
    fire_only_once = yes

    is_triggered_only = yes

    option = {  
        name = cold_war.13.a
        add_country_leader_role = { #skip over 2 leaders of just 2 and 3 weeks respectively
            Character = GRE_konstantinos_tsaldaris
            Promote_leader = yes
            Country_leader = {
                ideology = centrism_democratic
                expire = 1954.2.1.1
                traits = {
                    
                }
            }
        }
        185 = {
            add_dynamic_modifier = {
                modifier = communist_partisans
            }
        }
        731 = {
            add_dynamic_modifier = {
                modifier = communist_partisans
            }
        }
        184 = {
            add_dynamic_modifier = {
                modifier = communist_partisans
            }
        }
        country_event = {
            id = cold_war.14
            days = 160
        }
        country_event = {
            id = cold_war.15
            days = 260
        }
    }
}

#Monarchist referendum Greece
country_event = {
    id = cold_war.14
    picture = GFX_report_event_generic_conference
	title = cold_war.14.t
	desc = cold_war.14.d
    fire_only_once = yes

    is_triggered_only = yes

    option = {
        name = cold_war.14.a
        add_ideas = GRE_george_ii
    }
}

#Communists form democratic army and rival gov
country_event = {
    id = cold_war.15
    picture = GFX_report_event_generic_conference
	title = cold_war.15.t
	desc = cold_war.15.d
    fire_only_once = yes

    is_triggered_only = yes

    immediate = {
        hidden_effect = {        
            185 = {
                remove_dynamic_modifier = {
                    modifier = communist_partisans
                }
            }
            731 = {
                remove_dynamic_modifier = {
                    modifier = communist_partisans
                }
            }
            184 = {
                remove_dynamic_modifier = {
                    modifier = communist_partisans
                }
            }
        }
    }

    option = {
        name = cold_war.15.a
        start_civil_war = {
            ideology = communism
            size = 0.2
            states = { 731 185 }
            add_ideas = GRE_communist_mountain_fighter
            every_neighbor_country = {
                limit = {
                    has_government = communism
                }
                give_military_access = PREV
            }
            hidden_effect = {
                set_province_controller = 6990
                set_province_controller = 9791
                731 = {
                    teleport_armies = {
                        limit = {
                            tag = ROOT
                        }
                        to_province = 9837
                    }
                }
            }
        }
        hidden_effect = {
            set_province_controller = 11818
            set_province_controller = 10163
            set_province_controller = 3844
            set_province_controller = 895
    
            set_province_controller = 1205
            set_province_controller = 12001
            set_province_controller = 1106
            set_province_controller = 11895
            184 = {
                teleport_armies = {
                    limit = {
                        tag = ROOT
                    }
                    to_province = 11818
                }
            }
        }
    }
    option = {
        name = cold_war.15.b
        start_civil_war = {
            ruling_party = communism
            ideology = ROOT
            size = 0.7
            states = all
            states_filter = {
                NOT = {
                    state = 731
                    state = 185
                }
            }
            hidden_effect = {
                set_province_controller = 11818
                set_province_controller = 10163
                set_province_controller = 3844
                set_province_controller = 895
    
                set_province_controller = 1205
                set_province_controller = 12001
                set_province_controller = 1106
                set_province_controller = 11895
                184 = {
                    teleport_armies = {
                        limit = {
                            tag = ROOT
                        }
                        to_province = 11818
                    }
                }
            }
        }
        hidden_effect = {
            set_province_controller = 6990
            set_province_controller = 9791
            731 = {
                teleport_armies = {
                    limit = {
                        tag = ROOT
                    }
                    to_province = 9837
                }
            }
        }
        add_ideas = GRE_communist_mountain_fighter
        every_neighbor_country = {
            limit = {
                has_government = communism
            }
            give_military_access = PREV
        }
    }
}