##################################################
###### RT56RP - Afghanistan Rework by Dutch ######
##################################################

add_namespace = afghanistan
add_namespace = AFG_purchase_guns
add_namespace = AFG_purchase_tanks
add_namespace = AFG_civil_war
add_namespace = AFG_loya_jirga

country_event = {
    id = afghanistan.1
    picture = GFX_report_event_tur_kurdish_guerillas
	title = afghanistan.1.t
	desc = afghanistan.1.d

    trigger = {
        original_tag = AFG
        has_war = yes
        has_capitulated = no
        any_controlled_state = {
            has_state_flag = AFG_tribal_state_flag
        }
    }

    mean_time_to_happen = {
        days = 120
    }

    option = {
        name = afghanistan.1.a
        add_political_power = -10
        AFG_bop_very_low_decrease_effect = yes
        random_controlled_state = {
            limit = {
                has_state_flag = AFG_tribal_state_flag
            }
            create_unit = {
                division = "name = \"Milishia Qabalia\" division_template = \"Milishia Qabalia\" start_equipment_factor = 0.3"
                owner = ROOT
            }
        }
    }
     
    option = {
        name = afghanistan.1.b
        add_political_power = 40
    }
}

country_event = {
    id = afghanistan.2
    picture = GFX_report_event_tur_kurdish_guerillas
	title = afghanistan.2.t
	desc = afghanistan.2.d

	is_triggered_only = yes

    option = {
        name = afghanistan.2.a
        AFG_shirinsho_shotemur = {
			promote_character = yes
		}
    }
}

country_event = {
    id = afghanistan.3
    picture = GFX_report_event_tur_kurdish_guerillas
	title = afghanistan.3.t
	desc = afghanistan.3.d

	is_triggered_only = yes

    option = { ### YES
        name = afghanistan.3.a
		custom_effect_tooltip = AFG_SSR_forming_tt
		AFG = { country_event = { id = afghanistan.4 hours = 1 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 15
				is_historical_focus_on = no
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}

	option = { ### NO
		name = afghanistan.3.b
		AFG = { country_event = { id = afghanistan.6 hours = 1 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 50
				is_historical_focus_on = yes
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				is_historical_focus_on = no
			}
		}
	}
}

	country_event = {
		id = afghanistan.4
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.4.t
		desc = afghanistan.4.d
	
		is_triggered_only = yes
	
		option = {
			name = afghanistan.4.a
			custom_effect_tooltip = AFG_SSR_forming_tt
			hidden_effect = {
				SOV = { 
					set_autonomy = {
						target = AFG
						autonomy_state = integrated_puppet
						end_wars = no
						end_civil_wars = no
					}
				}
				AFG = {
					transfer_state = 830
					transfer_state = 831
					transfer_state = 832
					transfer_state = 985
					transfer_state = 584
					transfer_state = 742
					transfer_state = 823
					transfer_state = 585
					transfer_state = 405
					transfer_state = 732
					add_state_core = 830
					add_state_core = 831
					add_state_core = 832
					add_state_core = 985
					add_state_core = 584
					add_state_core = 742
					add_state_core = 823
					add_state_core = 585
					add_state_core = 405
					add_state_core = 732
				}
			}
			set_cosmetic_tag = AFG_SSR
		}
	}

	country_event = {
		id = afghanistan.5
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.5.t
		desc = afghanistan.5.d
	
		is_triggered_only = yes

	
		option = {
			name = afghanistan.5.a
				create_wargoal = {
					type = puppet
					target = PER
					expire = 0
				}
				add_timed_idea = {
					idea = rt56_AFG_operation_countenance
					days = 365
				}
				AFG = {
					add_timed_idea = {
						idea = rt56_AFG_operation_countenance
						days = 365
					}
				}
		}

		option = { ### NO
			name = afghanistan.5.b
			AFG = {	country_event = { id = afghanistan.7 hours = 2 } }
		}
	}

	country_event = {
		id = afghanistan.6
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.6.t
		desc = afghanistan.6.d
	
		is_triggered_only = yes

	
		option = {
			name = afghanistan.6.a
		}

		option = {
			name = afghanistan.6.b
			SOV = { puppet = AFG }
			add_political_power = -25
		}

		option = {
			name = afghanistan.6.c
			AFG_mawlana_qiamuddin_khadim = {
				promote_character = yes
			}
			add_stability = -0.1
			add_political_power = -50
			unlock_national_focus = AFG_our_own_path
		}
	}

	country_event = { ###CAPTURING BALUCHISTAN
		id = afghanistan.7
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.7.t
		desc = afghanistan.7.d

		fire_only_once = yes
	
		is_triggered_only = yes
	
		option = {
			name = afghanistan.7.a
			add_war_support = 0.025
			add_manpower = 25000
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = AFG
			}
			444 = {
				add_compliance = 10
			}
		}
	}
	country_event = { ###CAPTURING QUETTA
		id = afghanistan.8
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.8.t
		desc = afghanistan.8.d

		fire_only_once = yes
	
		is_triggered_only = yes
	
		option = {
			name = afghanistan.8.a
			add_war_support = 0.025
			add_manpower = 25000
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = AFG
			}
			445 = {
				add_compliance = 10
			}
		}
	}

	country_event = { ###CAPTURING PESHAWAR
		id = afghanistan.9
		picture = GFX_report_event_tur_kurdish_guerillas
		title = afghanistan.9.t
		desc = afghanistan.9.d

		fire_only_once = yes
	
		is_triggered_only = yes

		option = {
			name = afghanistan.9.a
			add_war_support = 0.05
			add_manpower = 40000
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1500
				producer = AFG
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 20
				producer = AFG
			}
			442 = {
				add_compliance = 10
			}
		}
	}

country_event = { # Soviet Purchase
	id = AFG_purchase_guns.1
	title = AFG_purchase_guns.1.t
	desc = AFG_purchase_guns.1.desc
	picture = GFX_report_event_AFG_soviet_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.a
		add_to_variable = { var = SOV_influence value = 10 }
		AFG = {
			country_event = { id = AFG_purchase_guns.5 hours = 12 }
		}
		send_equipment = {
			equipment = infantry_equipment_1
			amount = 750
			target = AFG
		}
	}

	option = {
		name = AFG_purchase_guns.b
		AFG = { country_event = { id = AFG_purchase_guns.4 hours = 12 } }
	}
}

country_event = { # British Purchase
	id = AFG_purchase_guns.2
	title = AFG_purchase_guns.1.t
	desc = AFG_purchase_guns.1.desc
	picture = GFX_report_event_AFG_british_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.a
		add_to_variable = { var = ENG_influence value = 10 }
		AFG = {
			country_event = { id = AFG_purchase_guns.6 hours = 12 }
		}
		send_equipment = {
			equipment = infantry_equipment_1
			amount = 750
			target = AFG
		}
	}

	option = {
		name = AFG_purchase_guns.b
		AFG = {
			country_event = { id = AFG_purchase_guns.3 hours = 12 }
		}
	}
}

country_event = { #Brits Reject 
	id = AFG_purchase_guns.3
	title = AFG_purchase_guns.3.t
	desc = AFG_purchase_guns.3.desc
	picture = GFX_report_event_AFG_british_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.3.a
	}
}

country_event = { #Soviets Reject
	id = AFG_purchase_guns.4
	title = AFG_purchase_guns.4.t
	desc = AFG_purchase_guns.4.desc
	picture = GFX_report_event_AFG_soviet_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.3.a
	}
}

country_event = { #Soviets Accept
	id = AFG_purchase_guns.5
	title = AFG_purchase_guns.5.t
	desc = AFG_purchase_guns.5.desc
	picture = GFX_report_event_AFG_soviet_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.5.a
		custom_effect_tooltip = AFG_gun_purchase_tt3
	}
}

country_event = { #Brits Accept
	id = AFG_purchase_guns.6
	title = AFG_purchase_guns.6.t
	desc = AFG_purchase_guns.6.desc
	picture = GFX_report_event_AFG_british_guns
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.5.a
		custom_effect_tooltip = AFG_gun_purchase_tt2
	}
}

country_event = { # Soviet Tank Purchase
	id = AFG_purchase_tanks.1
	title = AFG_purchase_tanks.1.t
	desc = AFG_purchase_tanks.1.desc
	picture = GFX_report_event_AFG_soviet_tanks
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_tanks.a
		add_to_variable = { var = SOV_influence value = 10 }
		AFG = {
			country_event = { id = AFG_purchase_tanks.2 hours = 12 }
		}
		send_equipment = {
			equipment = light_tank_equipment_1
			amount = 50
			target = AFG
		}
		create_production_license = {
			target = AFG
			equipment = {
				type = light_tank_chassis_1
			}
			cost_factor = 0
		}
	}

	option = {
		name = AFG_purchase_guns.b
		AFG = { country_event = { id = AFG_purchase_tanks.3 hours = 12 } }
	}
}

country_event = { # Soviets Accept
	id = AFG_purchase_tanks.2
	title = AFG_purchase_tanks.2.t
	desc = AFG_purchase_tanks.2.desc
	picture = GFX_report_event_AFG_soviet_tanks
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.5.a
		custom_effect_tooltip = AFG_tank_purchase_tt_1
	}
}

country_event = { # Soviets Reject
	id = AFG_purchase_tanks.3
	title = AFG_purchase_tanks.1.t
	desc = AFG_purchase_tanks.1.desc
	picture = GFX_report_event_AFG_soviet_tanks
	
	is_triggered_only = yes

	option = {
		name = AFG_purchase_guns.3.a
	}
}

country_event = { # Loya Jirga Starts
	id = AFG_loya_jirga.1
	title = AFG_loya_jirga.1.t
	desc = AFG_loya_jirga.1.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.1.a
		activate_mission = AFG_loya_jirga_mission
		set_country_flag = AFG_loya_jirga_started
	}
}

country_event = { # Loya Jirga Modernization Discussion
	id = AFG_loya_jirga.2
	title = AFG_loya_jirga.2.t
	desc = AFG_loya_jirga.2.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.2.a
		hidden_effect = {
			if = {
				limit = { 
					NOT = {
						AND = {
							has_country_flag = AFG_womens_education_flag
							has_country_flag = AFG_army_modernization_flag
						}
					}
				}
				random_list = {
					5 = { country_event = { id = AFG_loya_jirga.6 hours = 6 random_hours = 6 } }
					95 = { country_event = { id = AFG_loya_jirga.5 hours = 6 random_hours = 6 } }
				}
			}
			if = {
				limit = { 
					has_country_flag = AFG_army_modernization_flag
					NOT = {	
						has_country_flag = AFG_womens_education_flag
					}
				}
				random_list = {
					40 = { country_event = { id = AFG_loya_jirga.6 hours = 6 random_hours = 6 } }
					60 = { country_event = { id = AFG_loya_jirga.5 hours = 6 random_hours = 6 } }
				}
			}
			if = {
				limit = { 
					has_country_flag = AFG_womens_education_flag
					NOT = {	
						has_country_flag = AFG_army_modernization_flag
					}
				}
				random_list = {
					30 = { country_event = { id = AFG_loya_jirga.6 hours = 6 random_hours = 6 } }
					70 = { country_event = { id = AFG_loya_jirga.5 hours = 6 random_hours = 6 } }
				}
			}
			if = {
				limit = { 
					has_country_flag = AFG_womens_education_flag
					has_country_flag = AFG_army_modernization_flag
				}
				random_list = {
					80 = { country_event = { id = AFG_loya_jirga.6 hours = 6 random_hours = 6 } }
					20 = { country_event = { id = AFG_loya_jirga.5 hours = 6 random_hours = 6 } }
				}
			}
		}
	}
}

country_event = { # Loya Jirga Economy Discussion
	id = AFG_loya_jirga.3
	title = AFG_loya_jirga.3.t
	desc = AFG_loya_jirga.3.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.3.a
		hidden_effect = {
			random_list = {
				70 = { country_event = { id = AFG_loya_jirga.8 hours = 6 random_hours = 6 } }
				30 = { country_event = { id = AFG_loya_jirga.7 hours = 6 random_hours = 6 } }
			}
		}
	}

	option = {
		name = AFG_loya_jirga.3.b
		add_political_power = -25
		hidden_effect = {
			random_list = {
				40 = { country_event = { id = AFG_loya_jirga.8 hours = 6 random_hours = 6 } }
				60 = { country_event = { id = AFG_loya_jirga.7 hours = 6 random_hours = 6 } }
			}
		}
	}

	option = {
		name = AFG_loya_jirga.3.c
		add_political_power = -50
		hidden_effect = {
			random_list = {
				5 = { country_event = { id = AFG_loya_jirga.8 hours = 6 random_hours = 6 } }
				95 = { country_event = { id = AFG_loya_jirga.7 hours = 6 random_hours = 6 } }
			}
		}
	}
}

country_event = { # Loya Jirga Foreign Policy Discussion
	id = AFG_loya_jirga.4
	title = AFG_loya_jirga.4.t
	desc = AFG_loya_jirga.4.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.4.a
		hidden_effect = {
			random_list = {
				70 = { country_event = { id = AFG_loya_jirga.10 hours = 6 random_hours = 6 } }
				30 = { country_event = { id = AFG_loya_jirga.9 hours = 6 random_hours = 6 } }
			}
		}
	}

	option = {
		name = AFG_loya_jirga.4.b
		add_political_power = -25
		hidden_effect = {
			random_list = {
				40 = { country_event = { id = AFG_loya_jirga.10 hours = 6 random_hours = 6 } }
				60 = { country_event = { id = AFG_loya_jirga.9 hours = 6 random_hours = 6 } }
			}
		}
	}

	option = {
		name = AFG_loya_jirga.4.c
		add_political_power = -50
		hidden_effect = {
			random_list = {
				5 = { country_event = { id = AFG_loya_jirga.10 hours = 6 random_hours = 6 } }
				95 = { country_event = { id = AFG_loya_jirga.9 hours = 6 random_hours = 6 } }
			}
		}
	}
}

country_event = { # Loya Jirga Modernization Tribal Leaders Approve
	id = AFG_loya_jirga.5
	title = AFG_loya_jirga.5.t
	desc = AFG_loya_jirga.5.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.5.a
		set_country_flag = AFG_leaders_approve_modernization
		set_country_flag = AFG_discussed_modernization
		swap_ideas = {
			remove_idea = rt56rp_AFG_tribal_state
			add_idea = rt56rp_AFG_tribal_state_modernization
		}
		add_power_balance_value = {
			id = AFG_power_balance
			value = 0.1
			tooltip_side = AFG_professional_side
		}
		add_to_variable = { var = AFG_loya_jirga_var value = 1 }
	}
}

country_event = { # Loya Jirga Modernization Tribal Leaders Disapprove
	id = AFG_loya_jirga.6
	title = AFG_loya_jirga.6.t
	desc = AFG_loya_jirga.6.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.6.a
		set_country_flag = AFG_leaders_disapproves_modernization
		set_country_flag = AFG_discussed_modernization
		add_power_balance_value = {
			id = AFG_power_balance
			value = -0.1
			tooltip_side = AFG_professional_side
		}
	}
}

country_event = { # Loya Jirga Economy Tribal Leaders Impressed
	id = AFG_loya_jirga.7
	title = AFG_loya_jirga.7.t
	desc = AFG_loya_jirga.7.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.7.a
		set_country_flag = AFG_leaders_impressed_economy
		set_country_flag = AFG_discussed_economy
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state_modernization
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state_modernization
				add_idea = rt56rp_AFG_tribal_state_economy
			}
		}
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state
				add_idea = rt56rp_AFG_tribal_state_economy_no_modern
			}
		}
		add_power_balance_value = {
			id = AFG_power_balance
			value = 0.1
			tooltip_side = AFG_professional_side
		}
		add_to_variable = { var = AFG_loya_jirga_var value = 1 }
	}
}

country_event = { # Loya Jirga Economy Tribal Leaders Not Impressed
	id = AFG_loya_jirga.8
	title = AFG_loya_jirga.8.t
	desc = AFG_loya_jirga.8.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.8.a
		set_country_flag = AFG_leaders_unimpressed_economy
		set_country_flag = AFG_discussed_economy
		add_power_balance_value = {
			id = AFG_power_balance
			value = -0.1
			tooltip_side = AFG_professional_side
		}
	}
}

country_event = { # Loya Jirga Foreign Policy Common Ground
	id = AFG_loya_jirga.9
	title = AFG_loya_jirga.9.t
	desc = AFG_loya_jirga.9.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.9.a
		set_country_flag = AFG_leaders_policy_found
		set_country_flag = AFG_discussed_policy
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state_modernization
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state_modernization
				add_idea = rt56rp_AFG_tribal_state_policy_no_economy
			}
		}
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state_economy
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state_economy
				add_idea = rt56rp_AFG_tribal_state_policy
			}
		}
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state_economy_no_modern
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state_economy_no_modern
				add_idea = rt56rp_AFG_tribal_state_policy_no_modern
			}
		}
		if = {
			limit = {
				has_idea = rt56rp_AFG_tribal_state
			}
			swap_ideas = {
				remove_idea = rt56rp_AFG_tribal_state
				add_idea = rt56rp_AFG_tribal_state_policy_no_modern_no_economy
			}
		}
		add_power_balance_value = {
			id = AFG_power_balance
			value = 0.1
			tooltip_side = AFG_professional_side
		}
		add_to_variable = { var = AFG_loya_jirga_var value = 1 }
	}
}

country_event = { # Loya Jirga Foreign Policy Talks Break Down
	id = AFG_loya_jirga.10
	title = AFG_loya_jirga.10.t
	desc = AFG_loya_jirga.10.desc
	picture = GFX_report_event_AFG_loya_jirga_discussions
	
	is_triggered_only = yes

	option = {
		name = AFG_loya_jirga.10.a
		set_country_flag = AFG_leaders_policy_not_found
		set_country_flag = AFG_discussed_policy
		add_power_balance_value = {
			id = AFG_power_balance
			value = -0.1
			tooltip_side = AFG_professional_side
		}
	}
}

country_event = { #Afghan Civil War
	id = AFG_civil_war.1
	title = AFG_civil_war.1.t
	desc = AFG_civil_war.1.desc
	picture = GFX_report_event_AFG_civil_war
	
	is_triggered_only = yes

	option = {
		name = AFG_civil_war.1.a
		if = {
			limit = {
				check_variable = { SOV.SOV_influence > ENG.ENG_influence }
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = communism
				size = 0.8
				army_ratio = 0.8
				air_ratio = 0.8
			}
		}
		if = {
			limit = {
				check_variable = { ENG.ENG_influence > SOV.SOV_influence }
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = democratic
				size = 0.8
				army_ratio = 0.8
				air_ratio = 0.8
			}
		}
		if = {
			limit = {
				check_variable = { ENG.ENG_influence = SOV.SOV_influence }
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = fascism
				size = 0.8
				army_ratio = 0.8
				air_ratio = 0.8
			}
		}
	}
}

