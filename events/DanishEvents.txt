add_namespace = denmark
add_namespace = danish_elections

### LOCAL ELECTIONS
country_event = {   #Sjaelland - 1937/8
    id = denmark.1
    title = denmark.1.t
    desc = denmark.1.d
    picture = GFX_report_event_local_danish_election
    immediate = {
        hidden_effect = {
            country_event = {
                id = denmark.2
                days = 100
                random_days = 100
            }
        }
    }
    is_triggered_only = yes

    trigger = {
        has_government = democratic
    }

    option = {  #A-RV
        name = denmark.1.a
        add_political_power = -15
        37 = {
            den_election_socialdemocratic_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 47
        }
    }
    option = {  #C-V
        name = denmark.1.c
        37 = {
            den_election_conservative_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_conservative_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 53
        }
    }
}

country_event = {   #North Jutland - 1937/8
    id = denmark.2
    title = denmark.2.t
    desc = denmark.2.d
    picture = GFX_report_event_local_danish_election

    is_triggered_only = yes

    trigger = {
        has_government = democratic
    }

    immediate = {
        hidden_effect = {
            country_event = {
                id = denmark.3
                days = 100
                random_days = 100
            }
        }
    }

    option = {  #A-RV
        name = denmark.2.a
        99 = {
            den_election_socialdemocratic_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 72
        }
    }
    option = {  #C-V
        name = denmark.2.c
        add_political_power = -15
        99 = {
            den_election_conservative_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_conservative_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 28
        }
    }
}

country_event = {   #South Jutland - 1937/8
    id = denmark.3
    title = denmark.3.t
    desc = denmark.3.d
    picture = GFX_report_event_local_danish_election

    is_triggered_only = yes
    option = {  #A-RV
        name = denmark.3.a
        827 = {
            den_election_socialdemocratic_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 68
        }
    }
    option = {  #C-V
        name = denmark.3.c
        add_political_power = -15
        827 = {
            den_election_conservative_popularity = yes
            add_dynamic_modifier = {
                modifier = r56_conservative_elected
                days = 140
                scope = THIS
            }
        }
        ai_chance = {
            factor = 32
        }
    }
}
news_event = {  #Christian Coup
    id = denmark.0
    title = denmark.0.t
    desc = denmark.0.d
    picture = GFX_news_event_christian_x_coup
    is_triggered_only = yes

    option = {  #Failures of Democracy
        name = denmark.0.a
        trigger = {
            NOT = {
                has_government = democratic
                has_government = communism
            }
        }
    }

    option = {  #A Return to the middle ages
        name = denmark.0.b
        trigger = {
            OR = {
                has_government = communism
                AND = {
                    has_government = democratic
                    NOT = { #Not Monarchies
                        tag = ENG
                        tag = SWE
                        tag = NOR
                        tag = HOL
                        tag = BEL
                        tag = ROM
                        tag = YUG
                    }
                }
            }
        }
    }

    option = {  #Mixed Feelings
        name = denmark.0.c
        trigger = {
            has_government = democratic
            OR = {
                tag = ENG
                tag = SWE
                tag = NOR
                tag = HOL
                tag = BEL
                tag = ROM
                tag = YUG
            }
        }
    }
}

country_event = {   #The Conservatives become the ruling party
    id = denmark.10
    title = denmark.10.t
    desc = denmark.10.d
    picture = generic

    mean_time_to_happen = {
        days = 20
    }

    trigger = {
        tag = DEN
        has_country_flag = socialdemokratiet_dominating
        has_government = democratic
        is_subject = no
        NOT = {
			has_completed_focus = DEN_DNSAP_Takeover
			has_completed_focus = DEN_Konservative_Folkeparti_Majority
			has_completed_focus = DEN_Socialdemokratiet_Majority
			has_completed_focus = DEN_DKP_Takeover
			has_completed_focus = DEN_The_Monarchy_Referendum
        }

        set_temp_variable = {
            neu_pop = party_popularity@neutrality
        }
        add_to_temp_variable = {
            neu_pop = 0.1   #Must be 10% more popular than the conservatives
        }
        set_temp_variable = {
            dem_pop = party_popularity@democratic
        }
        check_variable = {
            neu_pop > dem_pop
        }
    }
    
    option = {
        set_party_name = {
            ideology = democratic
            name = "KF - V"
            long_name = "Det Konservative Folkeparti - Venstre"
        }
        set_party_name = {
            ideology = neutrality
            name = "Socialdemokratiet - RV - F"
            long_name = "Socialdemokratiet - Radikale Venstre - Bondepartiet"
        }
        den_switch_parties = yes
        clr_country_flag = socialdemokratiet_dominating
        hidden_effect = {
            retire_country_leader = yes
            retire_ideology_leader = neutrality
            create_country_leader = {
                name = "Thorvald Stauning"
                desc = "POLITICS_THORVALD_STAUNING_DESC"
                picture = "Portrait_Denmark_Thorvald_Stauning.dds"
                expire = "1965.1.1"
                ideology = centrism #placeholder
                traits = {
                    #
                }
            }
        }
        
        create_country_leader = {
            name = "Christmas Moller"
            desc = "POLITICS_CHRISTMAN_MOLLER_DESC"
            picture = "gfx/leaders/Europe/Portrait_Europe_Generic_land_4.dds"
            expire = "1965.1.1"
            ideology = conservatism 
            traits = {
                #
            }
        }
    }
}
country_event = {   #The Social Democrats become the ruling party again
    id = denmark.20
    title = denmark.20.t
    desc = denmark.20.d
    picture = generic

    mean_time_to_happen = {
        days = 20
    }
    
    trigger = {
        tag = DEN
        NOT = { has_country_flag = socialdemokratiet_dominating }
        has_government = democratic
        is_subject = no
        NOT = {
			has_completed_focus = DEN_DNSAP_Takeover
			has_completed_focus = DEN_Konservative_Folkeparti_Majority
			has_completed_focus = DEN_Socialdemokratiet_Majority
			has_completed_focus = DEN_DKP_Takeover
			has_completed_focus = DEN_The_Monarchy_Referendum
        }

        set_temp_variable = {
            neu_pop = party_popularity@neutrality
        }
        add_to_temp_variable = {
            neu_pop = 0.1   #Must be 10% more popular than the conservatives
        }
        set_temp_variable = {
            dem_pop = party_popularity@democratic
        }
        check_variable = {
            neu_pop > dem_pop
        }
    }
    
    option = {
        set_party_name = {
            ideology = democratic
            name = "Socialdemokratiet - RV"
            long_name = "Socialdemokratiet - Radikale Venstre"
        }
        set_party_name = {
            ideology = neutrality
            name = "KF - V - F"
            long_name = "Det Konservative Folkeparti - Venstre - Bondepartiet"
        }
        den_switch_parties = yes
        set_country_flag = socialdemokratiet_dominating
        hidden_effect = {
            retire_country_leader = yes
            retire_ideology_leader = neutrality
            create_country_leader = {
                name = "Christmas Moller"
                desc = "POLITICS_CHRISTMAN_MOLLER_DESC"
                picture = "gfx/leaders/Europe/Portrait_Europe_Generic_land_4.dds"
                expire = "1965.1.1"
                ideology = centrism 
                traits = {
                    #
                }
            }
        }
        
        create_country_leader = {
            name = "Thorvald Stauning"
            desc = "POLITICS_THORVALD_STAUNING_DESC"
            picture = "Portrait_Denmark_Thorvald_Stauning.dds"
            expire = "1965.1.1"
            ideology = socialism
            traits = {
                #
            }
        }
    }
}
country_event = {   #Thorvald Stauning died
    id = denmark.29
    title = denmark.29.t
    desc = denmark.29.d
    picture = generic

    fire_only_once = yes

    mean_time_to_happen = {
        days = 100
    }

    trigger = {
        date > 1942.1.1
        has_country_leader = {
            name = "Thorvald Stauning"
            ruling_only = yes
        }
        has_government = democratic
    }

    option = {
        name = denmark.29.a
        kill_country_leader = yes
        create_country_leader = {
            name = "Vilhelm Buhl"
            desc = "POLITICS_VILHELM_BUHL_DESC"
            picture = "gfx/leaders/DEN/r56_portrait_DEN_Wilhelm_Buhl.dds"
            expire = "1965.1.1"
            ideology = socialism
            traits = {
                #
            }
        }
    }
}

country_event = {   #Event about the restoration of royal authority
    id = denmark.30
    title = denmark.30.t
    desc = denmark.30.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.30.a
    }
}

country_event = {   #Event for Iceland to choose its future post coup
    id = denmark.31
    title = denmark.31.t
    desc = denmark.31.d
    picture = generic

    is_triggered_only = yes

    option = {  #Absolute Authority
        name = denmark.31.a
    }
    option = {  #Status Quo?
        name = denmark.31.b
    }
    option = {  #Independence
        name = denmark.31.c
    }
}

country_event = {   #DNSAP Intro
    id = denmark.40
    title = denmark.40.t
    desc = denmark.40.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.40.a
    }
}

country_event = {   #DKP Intro
    id = denmark.50
    title = denmark.50.t
    desc = denmark.50.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.50.a
    }
}

country_event = {   #Strikes Intro
    id = denmark.51
    title = denmark.51.t
    desc = denmark.51.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.51.a
        add_ideas = den_strikes_0
        hidden_effect = {
            country_event = {
                id = denmark.52
                hours = 96
            }
        }
    }
}

country_event = {   #Strikes
    id = denmark.52
    title = denmark.52.t
    desc = denmark.52.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.52.a
        add_ideas = den_strikes_0
        hidden_effect = {
            country_event = {
                id = denmark.52
                hours = 96
            }
        }
    }
}
country_event = {   #a
    id = denmark.100
    title = denmark.100.t
    desc = denmark.100.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.100.a
    }
}