add_namespace = denmark
add_namespace = christian_denmark
add_namespace = danish_elections

### LOCAL ELECTIONS
country_event = {   #Sjaelland - 1937/8
    id = danish_elections.1
    title = danish_elections.1.t
    desc = danish_elections.1.d
    picture = GFX_report_event_journalists_speech
    immediate = {
        hidden_effect = {
            country_event = {
                id = danish_elections.2
                days = 100
                random_days = 100
            }
        }
    }
    is_triggered_only = yes

    trigger = {
        has_government = democratic
        controls_state = 37
    }

    option = {  #A-RV
        name = danish_elections.1.a
        add_political_power = -10
        den_election_socialdemocratic_popularity = yes
        37 = {
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 47
        }
    }
    option = {  #C-V
        name = danish_elections.1.b
        den_election_conservative_popularity = yes
        37 = {
            add_dynamic_modifier = {
                modifier = r56_conservative_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 53
        }
    }
}

country_event = {   #North Jutland - 1937/8
    id = danish_elections.2
    title = danish_elections.2.t
    desc = danish_elections.2.d
    picture = GFX_report_event_journalists_speech

    is_triggered_only = yes

    trigger = {
        has_government = democratic
        controls_state = 99
    }

    immediate = {
        hidden_effect = {
            country_event = {
                id = danish_elections.3
                days = 100
                random_days = 100
            }
        }
    }

    option = {  #A-RV
        name = danish_elections.1.a
        den_election_socialdemocratic_popularity = yes
        99 = {
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 71
        }
    }
    option = {  #C-V
        name = danish_elections.1.b
        add_political_power = -15
        den_election_conservative_popularity = yes
        99 = {
            add_dynamic_modifier = {
                modifier = r56_conservative_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 28
        }
    }
    option = {  #DKP
        name = danish_elections.2.a
        add_political_power = -35
        add_popularity = {
            ideology = communism
            popularity = 0.03
        }
        99 = {
            add_dynamic_modifier = {
                modifier = r56_communist_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 1
            modifier = {
                add = 75
                has_completed_focus = DEN_An_Appeal_to_the_Proletariat
            }
        }
    }
}

country_event = {   #South Jutland - 1937/8
    id = danish_elections.3
    title = danish_elections.3.t
    desc = danish_elections.3.d
    picture = GFX_report_event_journalists_speech

    is_triggered_only = yes
    trigger = {
        has_government = democratic
        controls_state = 827
    }
    option = {  #A-RV
        name = danish_elections.1.a
        den_election_socialdemocratic_popularity = yes
        827 = {
            add_dynamic_modifier = {
                modifier = r56_social_democrat_elected
                days = 365
            }
        }
        ai_chance = {
            factor = 68
        }
    }
    option = {  #SP - Slesvig Party
        name = danish_elections.3.b
        if = {
            limit = {
                827 = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = r56_german_minority_galvanised
                        }
                    }
                }
            }
            add_political_power = -50
            add_popularity = {
                ideology = fascism
                popularity = 0.03
            }
            827 = {
                remove_dynamic_modifier = {
                    modifier = r56_german_minority
                }
                add_dynamic_modifier = {
                    modifier = r56_german_minority_placated
                }
            }
        }
        else = {
            add_political_power = -15
            add_popularity = {
                ideology = fascism
                popularity = 0.05
            }
        }
        ai_chance = {
            factor = 32
        }
    }
}
news_event = {  #Denmark repealed the Copenhagen Convention
    id = denmark.100
    title = denmark.100.t
    desc = denmark.100.d
    picture = GFX_news_event_danish_navy
    is_triggered_only = yes
    major = yes

    option = {  #Patriotism or something
        name = denmark.100.a
        trigger = {
            OR = {
                tag = DEN
                tag = var:DEN.copenhagen_backer     
                is_in_faction_with = DEN
            }
        }
    }
    option = {  #Grave Injustice
        name = denmark.100.b
        trigger = {
            OR = {
				tag = SWE
				tag = LIT
                tag = DNZ
				tag = SOV
                tag = NOR
				tag = FIN
				tag = LAT
				tag = EST
				tag = ENG
                tag = GER
				AND = {
					is_major = yes
					has_government = democratic
				}
			}
            DEN = {
                this_has_same_ideology_as_prev = no
            }
            NOT = {
                tag = DEN
                tag = var:DEN.copenhagen_backer       
                is_in_faction_with = DEN         
            }
        }
    }

    option = {  #Indifference
        name = denmark.100.c
        trigger = {
            NOT = {
                tag = SWE
                tag = LIT
                tag = DNZ
                tag = SOV
                tag = NOR
                tag = FIN
                tag = LAT
                tag = EST
                tag = ENG
                tag = GER                        
                is_major = yes
                has_government = democratic
                DEN = {
                    this_has_same_ideology_as_prev = no
                }
            }
        }
    }
}
news_event = {  #Christian Coup
    id = christian_denmark.0
    title = christian_denmark.0.t
    desc = christian_denmark.0.d
    picture = GFX_news_event_christian_x_coup
    is_triggered_only = yes
    major = yes

    option = {  #Patriotism or something
        name = christian_denmark.0.e
        trigger = {
            tag = DEN
        }
    }
    option = {  #Failures of Democracy
        name = christian_denmark.0.a
        trigger = {
            NOT = {
                has_government = democratic
                has_government = communism
                tag = DEN
            }
        }
    }

    option = {  #A Return to the middle ages
        name = christian_denmark.0.b
        trigger = {
            OR = {
                has_government = communism
                AND = {
                    has_government = democratic
                    NOT = { #Not Monarchies
                        tag = ENG
                        tag = SWE
                        tag = NOR
                        tag = HOL
                        tag = BEL
                        tag = ROM
                        tag = YUG
                        tag = ICE
                    }
                }
            }
            NOT = {
                tag = DEN
            }
        }
    }

    option = {  #Mixed Feelings
        name = christian_denmark.0.c
        trigger = {
            has_government = democratic
            NOT = {
                tag = DEN
            }
            OR = {
                tag = ENG
                tag = SWE
                tag = NOR
                tag = HOL
                tag = BEL
                tag = ROM
                tag = YUG
                tag = ICE
            }
        }
    }
}

country_event = {   #Anti Monarchist Resistance ramps up
    id = christian_denmark.1
    title = christian_denmark.1.t
    desc = christian_denmark.1.d
    picture = GFX_report_event_copenhagen_protests
    is_triggered_only = yes

    option = {  #Well crush em
        name = christian_denmark.1.a
        custom_effect_tooltip = den_anti_monarchist_resistance_tt
    }
}

country_event = {   #Iceland informed about Christian
    id = christian_denmark.2
    title = christian_denmark.2.t
    desc = christian_denmark.2.d
    picture = GFX_report_event_copenhagen_protests
    is_triggered_only = yes

    option = {  #Declare a Republic
        name = christian_denmark.2.a
        DEN = {
            country_event = {
                id = christian_denmark.3
                hours = 18
            }
        }
        custom_effect_tooltip = christian_iceland_war_tt
    }

    option = {  #Submit to Christian
        name = christian_denmark.2.b
        DEN = {
            country_event = {
                id = christian_denmark.4
                hours = 18
            }
        }
        custom_effect_tooltip = christian_iceland_annexation_tt
    }
}


country_event = {   #Iceland Defiant
    id = christian_denmark.3
    title = christian_denmark.3.t
    desc = christian_denmark.3.d
    picture = GFX_r56i_report_event_talksfail
    is_triggered_only = yes

    option = {  
        name = christian_denmark.3.a
    }
}

country_event = {   #Iceland compliant
    id = christian_denmark.4
    title = christian_denmark.4.t
    desc = christian_denmark.4.d
    picture = GFX_r56i_report_event_talkssucceed
    is_triggered_only = yes

    option = {
        name = christian_denmark.4.a
    }
}



country_event = {   #Christian contacting his brother, the king of Norway
    id = christian_denmark.5
    title = christian_denmark.5.t
    desc = christian_denmark.5.d
    picture = GFX_report_event_haakon_in_minerva_car
    is_triggered_only = yes

    option = {
        name = christian_denmark.5.a
        NOR = {
            country_event = {
                id = christian_denmark.6
                hours = 50
            }
        }
    }
}

country_event = {   #Haakon responds
    id = christian_denmark.6
    title = christian_denmark.6.t
    desc = christian_denmark.6.d
    picture = GFX_report_event_haakon_in_minerva_car
    is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                has_completed_focus = NOR_reject_constitutional_monarchy
            }
            set_variable = {
                nor_government_odds = 0
            }
        }
        else_if = {
            limit = {
                has_completed_focus = NOR_traditions_and_monarchy
            }
            set_variable = {
                nor_government_odds = 100
            }
        }
        else_if = {
            limit = {
                has_idea = NOR_change
            }
            set_variable = {
                nor_government_odds = 50
            }
        }
        else_if = {
            limit = {
                has_completed_focus = NOR_affirm_constitutional_monarchy
            }
            set_variable = {
                nor_government_odds = 25
            }
        }
        else = {
            set_variable = {
                nor_government_odds = 15
            }
        }
        set_variable = {
            nor_calc = 100
        }
        subtract_from_variable = {
            nor_calc = nor_government_odds
        }
    }

    option = {  #on board
        name = christian_denmark.6.a
        custom_effect_tooltip = norwegian_government_acceptance_tt
        hidden_effect = {
            retire_ideology_leader = neutrality
            create_country_leader = {
                name = "Haakon VII"
                desc = "POLITICS_HAAKON_VII_DESC"
                picture = "r56_portrait_NOR_Haakon_VII.dds"
                expire = "1965.1.1"
                ideology = centrism
                traits = { naw_naval_officer compassionate_gentleman }
            }
            set_party_name = {
                ideology = neutrality
                name = "Huset Glücksburg"
                long_name = "Glücksburg Restorationists"
            }
        }
        DEN = {
            set_autonomy = {
                target = NOR
                autonomy_state = autonomy_dominion
            }
        }
        set_politics = {
            ruling_party = neutrality
            elections_allowed = no
        }
        add_popularity = {
            ideology = neutrality
            popularity = 0.45
        }
        random_list = {
            var:nor_government_odds = {
            }
            var:nor_calc = {
                start_civil_war = {
                    ideology = democratic
                    size = 0.5
                    capital = 143
                    states = { 
                        142 143 144 
                    }
                    #keep_political_leader = yes
                }
                hidden_effect = {
                    set_cosmetic_tag = NOR_KINGDOM
                    random_country = {
                        limit = {
                            original_tag = NOR
                            has_government = democratic
                        }
                        set_cosmetic_tag = NOR_REP
                        load_oob = NOR_Norwegian_Civil_War_neutrality
                        remove_ideas = NOR_haakon
                        DEN = {
                            add_to_war = { 
                                targeted_alliance = NOR 
                                enemy = PREV
                                hostility_reason = asked_to_join
                            }
                        }
                    }
                }
            }
        }
    }
    option = {  #nay
        name = christian_denmark.6.b
        effect_tooltip = {
            every_owned_state = {
                limit = {
                    is_core_of = ROOT
                }
                add_claim_by = DEN
            }
        }
    }
}
country_event = {   #Political Violence Intro
    id = denmark.1
    title = denmark.1.t
    desc = denmark.1.d
    picture = generic
    is_triggered_only = yes

    option = {
        name = denmark.1.a
        den_initiate_violence = yes
    }
}
country_event = {
    id = denmark.2
    title = denmark.2.t
    desc = denmark.2.d
    picture = generic
    is_triggered_only = yes

    option = {  #Free Denmark
        name = denmark.2.a
        den_free_denmark_init = yes
    }
    option = {  #Collab Denmark
        name = denmark.2.b
        effect_tooltip = {
            den_collab_denmark_init = yes
        }
    }
}

country_event = {   #Straits reconsidered
    id = denmark.3
    title = denmark.3.t
    desc = denmark.3.d
    picture = GFX_report_event_journalists_speech
    is_triggered_only = yes

    option = { #Let everyone through
        name = denmark.3.a
        set_global_flag = {
            flag = copenhagen_convention_policy
            value = 1
        }
        custom_effect_tooltip = "Any nation not at war with us or our backer will be let through."
    }
    option = { #Let everyone that we have an opinion of >= 15 through
        name = denmark.3.b
        set_global_flag = {
            flag = copenhagen_convention_policy
            value = 2
        }
        custom_effect_tooltip = "Any nation that we have a opinion higher than 15 of will be let through."
    }
    option = { #Let everyone of the same ideology through
        name = denmark.3.c
        set_global_flag = {
            flag = copenhagen_convention_policy
            value = 3
        }
        custom_effect_tooltip = "Any nation that shares our ideology will be let through."
    }
    option = { #Only let allies through
        name = denmark.3.e
        set_global_flag = {
            flag = copenhagen_convention_policy
            value = 4
        }
        custom_effect_tooltip = "Any nation allied to us will be let through."
    }
}
country_event = {   #The Conservatives become the ruling party
    id = denmark.10
    title = denmark.10.t
    desc = denmark.10.d
    picture = GFX_report_event_copenhagen_protests

    mean_time_to_happen = {
        days = 20
    }

    trigger = {
        tag = DEN
        has_country_flag = socialdemokratiet_dominating
        has_government = democratic
        is_subject = no
        NOT = {
            has_country_flag = den_elections_disabled
			has_completed_focus = DEN_DNSAP_Takeover
			has_completed_focus = DEN_Conservative_Majority
			has_completed_focus = DEN_Social_Democratic_Majority
			has_completed_focus = DEN_DKP_Takeover
			has_completed_focus = DEN_King_Christian_Coup
        }

        set_temp_variable = {
            neu_pop = party_popularity@neutrality
        }
        add_to_temp_variable = {
            neu_pop = 0.05   #Must be 5% more popular than the social democrats
        }
        set_temp_variable = {
            dem_pop = party_popularity@democratic
        }
        check_variable = {
            neu_pop > dem_pop
        }
    }
    
    option = {
        set_party_name = {
            ideology = democratic
            name = "KF - V"
            long_name = "Det Konservative Folkeparti - Venstre"
        }
        set_party_name = {
            ideology = neutrality
            name = "Socialdemokratiet - RV - F"
            long_name = "Socialdemokratiet - Radikale Venstre - Bondepartiet"
        }
        den_switch_parties = yes
        clr_country_flag = socialdemokratiet_dominating
        hidden_effect = {
            retire_country_leader = yes
            retire_ideology_leader = neutrality
            create_country_leader = {
                name = "Thorvald Stauning"
                desc = "POLITICS_THORVALD_STAUNING_DESC"
                picture = "Portrait_Denmark_Thorvald_Stauning.dds"
                expire = "1965.1.1"
                ideology = centrism #placeholder
                traits = {
                    #
                }
            }
        }
        
        create_country_leader = {
            name = "Christmas Moller"
            desc = "POLITICS_CHRISTMAN_MOLLER_DESC"
            picture = "gfx/leaders/Europe/Portrait_Europe_Generic_land_4.dds"
            expire = "1965.1.1"
            ideology = conservatism 
            traits = {
                #
            }
        }
    }
}
country_event = {   #The Social Democrats become the ruling party again
    id = denmark.20
    title = denmark.20.t
    desc = denmark.20.d
    picture = GFX_report_event_copenhagen_protests

    mean_time_to_happen = {
        days = 20
    }
    
    trigger = {
        tag = DEN
        NOT = { has_country_flag = socialdemokratiet_dominating }
        has_government = democratic
        is_subject = no
        NOT = {
            has_country_flag = den_elections_disabled
			has_completed_focus = DEN_DNSAP_Takeover
			has_completed_focus = DEN_Conservative_Majority
			has_completed_focus = DEN_Social_Democratic_Majority
			has_completed_focus = DEN_DKP_Takeover
			has_completed_focus = DEN_King_Christian_Coup
        }

        set_temp_variable = {
            neu_pop = party_popularity@neutrality
        }
        add_to_temp_variable = {
            neu_pop = 0.05   #Must be 5% more popular than the conservatives
        }
        set_temp_variable = {
            dem_pop = party_popularity@democratic
        }
        check_variable = {
            neu_pop > dem_pop
        }
    }
    
    option = {
        set_party_name = {
            ideology = democratic
            name = "Socialdemokratiet - RV"
            long_name = "Socialdemokratiet - Radikale Venstre"
        }
        set_party_name = {
            ideology = neutrality
            name = "KF - V - F"
            long_name = "Det Konservative Folkeparti - Venstre - Bondepartiet"
        }
        den_switch_parties = yes
        set_country_flag = socialdemokratiet_dominating
        hidden_effect = {
            retire_country_leader = yes
            retire_ideology_leader = neutrality
            create_country_leader = {
                name = "Christmas Moller"
                desc = "POLITICS_CHRISTMAN_MOLLER_DESC"
                picture = "gfx/leaders/Europe/Portrait_Europe_Generic_land_4.dds"
                expire = "1965.1.1"
                ideology = centrism 
                traits = {
                    #
                }
            }
        }
        
        create_country_leader = {
            name = "Thorvald Stauning"
            desc = "POLITICS_THORVALD_STAUNING_DESC"
            picture = "Portrait_Denmark_Thorvald_Stauning.dds"
            expire = "1965.1.1"
            ideology = socialism
            traits = {
                #
            }
        }
    }
}
country_event = {   #Volunteers return from spain
    id = denmark.28
    title = denmark.28.t
    desc = denmark.28.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.28.a
        add_manpower = 400
        army_experience = 15
        add_war_support = 0.05
        add_popularity = {
            ideology = democratic
            popularity = 0.02
        }
        add_popularity = {
            ideology = communism
            popularity = 0.05
        }
    }
}
country_event = {   #Thorvald Stauning died
    id = denmark.29
    title = denmark.29.t
    desc = denmark.29.d
    picture = generic

    fire_only_once = yes

    mean_time_to_happen = {
        days = 100
    }

    trigger = {
        date > 1942.1.1
        has_country_leader = {
            name = "Thorvald Stauning"
            ruling_only = yes
        }
        has_government = democratic
    }

    option = {
        name = denmark.29.a
        kill_country_leader = yes
        create_country_leader = {
            name = "Vilhelm Buhl"
            desc = "POLITICS_VILHELM_BUHL_DESC"
            picture = "gfx/leaders/DEN/r56_portrait_DEN_Wilhelm_Buhl.dds"
            expire = "1965.1.1"
            ideology = socialism
            traits = {
                #
            }
        }
    }
}

country_event = {   #Event about the restoration of royal authority
    id = denmark.30
    title = denmark.30.t
    desc = denmark.30.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.30.a
    }
}

country_event = {   #Iceland moves towards independence
    id = denmark.31
    title = denmark.31.t
    desc = denmark.31.d
    picture = generic

    is_triggered_only = yes

    option = {  #nothing we can do
        name = denmark.31.a
    }
    option = {  #no you dont
        name = denmark.31.b
        trigger = {
            OR = {
                has_government = fascism
                has_government = communism
                has_government = neutrality
            }
        }
    }
}

country_event = {   #Communists win street battle
    id = denmark.50
    title = denmark.50.t
    desc = denmark.50.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.50.a
        add_stability = var:political_violence_consequence
        set_country_flag = den_no_violence_running
    }
}

country_event = {   #Fascists win street battle
    id = denmark.51
    title = denmark.51.t
    desc = denmark.51.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.51.a
        add_stability = var:political_violence_consequence
        set_country_flag = den_no_violence_running
    }
}

country_event = {   #Stalemate (government won)
    id = denmark.52
    title = denmark.52.t
    desc = denmark.52.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.52.a
        add_stability = 0.05
        set_country_flag = den_no_violence_running
    }
}

country_event = {   #Popular Front wins the battle
    id = denmark.53
    title = denmark.53.t
    desc = denmark.53.d
    picture = generic

    is_triggered_only = yes

    option = {
        name = denmark.53.a
        add_stability = var:political_violence_consequence
        set_country_flag = den_no_violence_running
    }
}
country_event = {   #Violence is again planned
    id = denmark.54
    title = denmark.54.t
    desc = denmark.54.d
    picture = generic

    trigger = {
        tag = DEN
        has_country_flag = den_no_violence_running
        NOT = {
            has_country_flag = den_elections_disabled
            is_subject = yes
            has_war = yes
        }
    }

    mean_time_to_happen = {
        days = 100
    }

    option = {
        name = denmark.54.a
        clr_country_flag = den_no_violence_running
        den_initiate_violence = yes
    }
}